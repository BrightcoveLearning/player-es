---
title: AMP usando un video externo
parent: amp
description: In this topic, you will learn how Accelerated Mobile Pages (AMP) can be used with Brightcove Player and an external, non-Video Cloud video.
---

<article class="bcls-article">
    <h1>AMP usando un video externo</h1>
    <summary>{{ page.description }}</summary>
    <section class="bcls-section">
        <aside class="bcls-aside bcls-aside--warning">Este documento utiliza AMP con Brightcove Player y un video NO ingerido en Video Cloud. Si es cliente de Video Cloud, consulte <a href="/playback/amp-using-video-cloud-video.html">AMP usando un video de Video Cloud</a>.</aside>
        <h2 id="Overview">Resumen</h2>
        <p>Accelerated Mobile Pages es un proyecto de Google que tiene como objetivo permitir «la creación de sitios web y anuncios que sean constantemente rápidos, hermosos y de alto rendimiento en todos los dispositivos y plataformas de distribución. « Puede utilizar Brightcove Player con AMP porque el proyecto incluye un <code translate="No">amp-brightcove</code> componente que permite a los editores incrustar reproductores de Brightcove en documentos HTML de AMP. Este ejemplo utiliza un complemento personalizado que acepta una URL a un video externo (que no es una nube de video) que se le pasa a través del <code translate="No">amp-brightcove</code> componente usando la costumbre <code translate="No">data-param-video-url</code> atributo.</p>
    </section>
    <section class="bcls-section">
        <h2 id="Sample">Muestra</h2>
        <p>A continuación se muestra una página HTML de AMP de ejemplo que incluye un reproductor de Brightcove. El reproductor funciona normalmente, por lo que el HTML es la parte interesante de este ejemplo. El código HTML se examina más adelante en este documento.</p>
        <p data-height="416" data-theme-id="dark" data-slug-hash="XZGQza" data-default-tab="html,result" data-user="rcrooks1969" data-embed-version="2" data-pen-title="AMP-Brightcove Player-External Video" class="codepen">Ver la prisma <a href="https://codepen.io/team/rcrooks1969/pen/XZGQza/">AMP-Brightcove Player-Video externo</a> por Brightcove Learning Services (<a href="https://codepen.io/rcrooks1969"> rcrooks1969</a> ) en <a href="https://codepen.io">CodePen</a>.</p>
        <script async src="https://static.codepen.io/assets/embed/ei.js"></script>
        <aside class="bcls-aside bcls-aside--warning">Tenga en cuenta que, debido a la forma en que funciona AMP, debe tener en cuenta cuidadosamente sus limitaciones antes de usarlas. Por ejemplo:
            <ul>
                <li>AMP tiene reglas muy estrictas sobre qué HTML puede y no se puede utilizar en una página. Los detalles al respecto se pueden ver en la especificación HTML de <a href="https://www.ampproject.org/docs/reference/spec">AMP</a>.</li>
                <li>Brightcove Analytics no notificará correctamente la página de referencia de las páginas AMP; en su lugar, <code translate="No">referrer_domain</code> quedará en blanco y se <code translate="No">source_type</code> grabará como <code translate="No">direct</code>.</li>
                <li>No todos los atributos utilizados con la implementación de página avanzada de Brightcove Player son válidos con <code translate="No">amp-brightcove</code>.</li>
                <li>AMP no funcionará con reproductores con restricciones de dominio.</li>
            </ul>
        </aside>
    </section>
    <section class="bcls-section">
        <h2 id="Resources_from_AMP">Recursos de AMP</h2>
        <p>El proyecto AMP desarrolló un <code translate="No">amp-brightcove</code> componente especial que muestra Brightcove Player. El componente se detalla en el documento <a href="https://www.ampproject.org/docs/reference/components/amp-brightcove">amp-brightcove.</a></p>
        <p>AMP proporciona un ejemplo de <code translate="No">amp-brightcove</code> implementación con detalles en los siguientes documentos:</p>
        <ul>
            <li><a href="https://ampbyexample.com/components/amp-brightcove/">amp-brightcove</a></li>
            <li><a href="https://github.com/ampproject/amp-by-example/blob/master/src/20_Components/amp-brightcove.html">amp por ejemplo</a></li>
            <li><a href="https://ampbyexample.com/playground/#url=https%3A%2F%2Fampbyexample.com%2Fcomponents%2Famp-brightcove%2Fsource%2F">Zona de juegos AMP</a></li>
        </ul>
    </section>
    <section class="bcls-section">
        <h2 id="Player_configuration">Configuración del reproductor</h2>
        <p>Brightcove proporciona un complemento para mejorar el uso de AMP con Brightcove Player. El complemento agrega soporte para la API de interfaz de video de AMP que habilita algunas características avanzadas:</p>
        <ul>
            <li><strong>Integración con amp-analytics</strong>: Permite el seguimiento de las vistas de análisis de terceros en relación con el dominio de páginas AMP.</li>
            <li><strong>Integración con amp-bind</strong>: La reproducción se puede controlar mediante otros elementos de la página AMP.</li>
        </ul>
        <p>Los reproductores sin el complemento siguen funcionando en AMP, pero sin esa funcionalidad.</p>
        <h3><strong>Instalación de plugins</strong></h3>
        <aside class="bcls-aside bcls-aside--warning">DEBES instalar el plugin. En el pasado, AMP funcionaba sin agregar el plugin. Esto ya no es cierto.</aside>
        <p>Al igual que con todos los complementos de Brightcove Player, necesitas el nombre y la URL del plugin para el JavaScript del plugin, que se proporcionan aquí (no es necesario ningún archivo CSS para usarlo):</p>
        <h4>Nombre del plugin</h4>
        <pre class="line-numbers">
  <code class="language-html" translate="No">ampSupport</code></pre>
        <h4>URL JavaScript</h4>
        <pre class="line-numbers">
  <code class="language-html" translate="No">//players.brightcove.net/videojs-amp-support/1/videojs-amp-support.js</code></pre>
    </section>
    <section class="bcls-section">
        <h2 id="HTML_page_code_examination">Examen de código de página HTML</h2>
        <p>El código de la página HTML del ejemplo de CodePen anterior se muestra a continuación (el código del complemento se detalla en la siguiente sección). AMP proporciona una explicación completa del código en los documentos vinculados anteriormente. En la siguiente lista hay algunos trucos/trampas que debe tener en cuenta:</p>
        <ul>
            <li>Línea 14: Puede añadir una sola <code translate="No">style</code> etiqueta, pero debe incluir el <code translate="No">amp-custom</code> atributo.</li>
            <li>Línea 26: NO embellezca el código. El CSS de la caldera es necesario según lo suministrado por AMP.</li>
            <li>Línea 42: Aquí se pasa la URL del video externo. Recuerde que dado que el nombre se recuperará de un iframe <code translate="No">src</code> URL, el nombre será <code translate="No">videoUrl</code>.</li>
            <li>Línea 43: La <code translate="No">data-video-id</code> debe estar presente, pero no se le asigna un valor cuando se usa un video externo.</li>
            <li>Línea 44: los <code translate="No">width</code> y <code translate="No">height</code> Los atributos determinan la relación de aspecto del reproductor incrustado en diseños receptivos.</li>
        </ul>
        <pre class="line-numbers" data-start="1">
  <code class="language-html" translate="No">&lt;!--
    ## Introduction
  
    The `amp-brightcove` component allows embedding a Brightcove
    [Video Cloud](https://www.brightcove.com/en/online-video-platform) or
    [Perform](https://www.brightcove.com/en/perform) player.
  --&gt;
  &lt;!-- --&gt;
  &lt;!doctype html&gt;
  &lt;html ⚡&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8"&gt;
    &lt;title&gt;amp-brightcove&lt;/title&gt;
    &lt;style amp-custom&gt;
      .player-container {
        width: 640px;
        height: 360px;
      }
    &lt;/style&gt;
    &lt;script async src="https://cdn.ampproject.org/v0.js"&gt;&lt;/script&gt;
    &lt;!-- ## Setup --&gt;
    &lt;!-- Import the Brightcove component in the header. --&gt;
    &lt;script async custom-element="amp-brightcove" src="https://cdn.ampproject.org/v0/amp-brightcove-0.1.js"&gt;&lt;/script&gt;
    &lt;meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"&gt;
    &lt;link rel="canonical" href="https://ampbyexample.com/components/amp-brightcove/"&gt;
    &lt;style amp-boilerplate&gt;body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}&lt;/style&gt;&lt;noscript&gt;&lt;style amp-boilerplate&gt;body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}&lt;/style&gt;&lt;/noscript&gt;
  
  
  &lt;/head&gt;
  &lt;body&gt;
  
    &lt;!-- ## Basic Usage --&gt;
    &lt;!--
      A responsive brightcove video. The required data is `data-account` and `data-video-id`. Other
      supported parameters are `data-player-id`, `data-embed` and `data-playlist-id`.
    --&gt;
    &lt;div class="player-container"&gt;
      &lt;amp-brightcove
        data-account="3676484087001"
        data-player-id="ByrhJWAPf"
        layout="responsive"
        data-param-video-url="//solutions.brightcove.com/bcls/videos/calm-day-oregon-coast.mp4"
        data-video-id
        width="16" height="9"&gt;
      &lt;/amp-brightcove&gt;
    &lt;/div&gt;
  
  
  &lt;/body&gt;
  &lt;/html&gt;</code></pre>
    </section>
    <section class="bcls-section">
        <h2 id="Plugin_code_examination">Examen del código del complemento</h2>
        <p>La forma en que funciona AMP es que <code translate="No">amp-brightcove</code> El componente crea una implementación de iframe del Brightcove Player. En la URL del iframe estará el atributo personalizado, como se muestra aquí:</p>
        <pre class="line-numbers">
  <code class="language-html" translate="No">&lt;iframe frameborder="0" allowfullscreen="true" src="https://players.brightcove.net/3676484087001/ByrhJWAPf_default/index.html?<span class="bcls-highlight">videoUrl=%2F%2Fsolutions.brightcove.com%2Fbcls%2Fvideos%2Fcalm-day-oregon-coast.mp4"</span>; class="i-amphtml-fill-content" kwframeid="1"&gt;&lt;/iframe&gt;</code></pre>
        <p>Si se desplaza en el código del iframe, verá la cadena de consulta que se muestra aquí:</p>
        <figure class="bcls-figure"><img class="bcls-image" alt="AMP iframe source" src="/assets/images/amp/amp-external-amp-url.png" /></figure>
        <p>Observe que el nombre de la cadena de consulta es <code translate="No">videoUrl</code>. También tenga en cuenta que la URL ha sido codificada como URL. Ambos problemas se reflejarán en el código del complemento, que se muestra aquí:</p>
        <ul>
            <li>Líneas 21-38: Una función auxiliar que encuentra el valor asociado con una cadena de consulta, pasado a la función como un parámetro.</li>
            <li>Línea 7: Recuperar el valor del <code translate="No">videoUrl</code> cadena de consulta utilizando la función auxiliar.</li>
            <li>Línea 8: Utilice JavaScript <code translate="No">decodeURIComponent()</code> método para obtener una URL válida para el video.</li>
            <li>Líneas 11-14: Utilice la URL decodificada y coloque el video en el reproductor. Si va a utilizar formatos de video que no sean MP4, deberá pasar la <code translate="No">type</code> valor, o escribir lógica para leer la extensión del video y asignar el valor correcto.</li>
            <li>Líneas 17-19: Por supuesto que no es obligatorio, pero si desea que el video se reproduzca al inicio, puede usar este código.</li>
        </ul>
        <pre class="line-numbers">
  <code class="language-javascript" translate="No">videojs.registerPlugin('ampPassVideo', function() {
    var myPlayer = this,
      encodedVideoQueryParam,
      decodedVideoQueryParam;
  
    // Get the query string and un-URL encode it
    encodedVideoQueryParam = getQuerystring('videoUrl');
    decodedVideoQueryParam = decodeURIComponent(encodedVideoQueryParam);
  
    // Load the video into the player
    myPlayer.src({
      'type': 'video/mp4',
      'src': decodedVideoQueryParam
    });
  
    // On loadedmetadata event, play the video
    myPlayer.on('loadedmetadata', function(){
      myPlayer.play();
    });
  
    /*
     * usage: foo = getQuerystring("bctid", null);
     * foo will be equal to value of query param bctid
     * note that the default_ parameter is what you will get back
     * if the key isn’t found
     */
    function getQuerystring(key, default_) {
      var regex, qs;
      if (default_ == null) default_ = "";
      key = key.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
      regex = new RegExp("[\\?&amp;]" + key + "=([^&amp;#]*)");
      qs = regex.exec(window.location.href);
      if (qs === null) {
        return default_;
      } else {
        return qs[1];
      }
    }
  });</code></pre>
        <p>Asignarías este complemento a tu reproductor usando <a href="https://studio.support.brightcove.com/players/configuring-player-plugins.html">Estudio</a> o la API de administración de jugadores.</p>
    </section>
    <section class="bcls-section">
        <h2 id="Features">Características</h2>
        <p>Aunque se discute en la documentación de AMP, aquí se destacan algunas características que son de especial importancia:</p>
        <!-- These are features that are common to both Video Cloud and external videos -->
        <!-- THIS SECTION CAN BE ADDED TO THEN COPIED TO SIMILAR SECTION IN Video Cloud VIDEO FEATURES SECTION -->

        <h3>Parámetros personalizados</h3>
        <p>Es posible que quieras pasar información adicional a tu reproductor para que tus complementos puedan acceder. Puede hacerlo añadiendo atributos adicionales en el <code translate="No">amp-brightcove</code> elemento al que se debe nombrar <code translate="No">data-param-*</code>, donde <code translate="No">*</code> es el nombre de su propiedad.</p>
        <p>Los parámetros se pasan como nombres de atributos con carcasa de camello anexados a la URL del reproductor. Las claves y los valores están codificados por URL. Por ejemplo:</p>
        <ul>
            <li><code translate="No">data-param-language="de"</code> se convierte <code translate="No">&amp;language=de</code></li>
            <li><code translate="No">data-param-ad-vars="key:val;key2:val2"</code> se convierte <code translate="No">&amp;adVars=key%3Aval%3Bkey2%3Aval2</code></li>
        </ul>
        <h3>Soporte para referentes externos</h3>
        <p>Brightcove Player v6.25.0+ admite la configuración de un referente arbitrario en un iframe. El componente AMP ahora admite pasar por su propio referente al reproductor, añadiendo un <code translate="No">referrer="EXTERNAL_REFERRER"</code> atributo su amp-brightcove embed.</p>
        <p>EXTERNAL_REFERRER es la macro propia de AMP; consulte <a href="https://github.com/ampproject/amphtml/blob/19135a3aac7813a9ff263a9f863fe35aeb316582/spec/amp-var-substitutions.md#external-referrer">https://github.com/ampproject/amphtml/blob/19135a3aac7813a9ff263a9f863fe35aeb316582/spec/amp-var-substitutions.md#external-referrer</a> para obtener más información.</p>
        <h3>Análisis AMP</h3>
        <p>Un <strong>amp-analytics</strong> El componente se puede utilizar en un documento AMP para realizar un seguimiento de los datos en cualquier análisis arbitrario. Si los editores desean incluir eventos de vídeo, ahora pueden hacerlo.</p>
        <p>El documento de AMP sobre la sintaxis de AMP Analytics (que es engorroso) está aquí: <a href="https://www.ampproject.org/docs/reference/components/amp-analytics">https://www.ampproject.org/docs/reference/components/amp-analytics</a>. Y, en concreto, análisis de vídeo: <a href="https://github.com/ampproject/amphtml/blob/master/extensions/amp-analytics/amp-video-analytics.md">https://github.com/ampproject/amphtml/blob/master/extensions/amp-analytics/amp-video-analytics.md</a>.</p>
        <p>Hay un ejemplo disponible, rastreando a <strong>example.com para</strong> que veas las balizas como errores en la pestaña de red: <a href="http://solutions.brightcove.com/bclifford/ampexamples/analytics.html">http://solutions.brightcove.com/bclifford/ampexamples/analytics.html</a>.</p>
        <h3>Enlazar AMP</h3>
        <p>AMP Bind es la API de AMP para interactuar entre componentes. A nivel básico, te permite tener algo externo al reproductor para controlar la reproducción. Por ejemplo, el siguiente código reproduciría un vídeo, donde <code translate="No">myPlayer</code> es el <code translate="No">id</code> del reproductor amp-brightcove.</p>
        <pre class="line-numbers">
    <code class="language-html" translate="No">&lt;button on="tap:myPlayer.play"&gt;Play&lt;/button&gt;</code></pre>
        <p>AMP no confía en los eventos de vídeo, por lo que actualmente no puedes hacer algo más útil, como actuar en un extremo de vídeo. Un ejemplo de esto está disponible aquí: <a href="http://solutions.brightcove.com/bclifford/ampexamples/bind.html">http://solutions.brightcove.com/bclifford/ampexamples/bind.html</a>.</p>
    </section>
</article>