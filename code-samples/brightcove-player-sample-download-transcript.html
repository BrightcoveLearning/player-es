---
title: 'Muestra de Brightcove Player: Descargar transcripción'
description: 'En este tema, aprenderá a usar el archivo WebVTT de subtítulos y a convertirlo en una transcripción descargable.'
parent: Code Samples
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="Player_example">Ejemplo de jugador</h2>
    <!-- UPDATE description -->
    
    <aside class="bcls-aside bcls-aside--information">Este ejemplo y el código asociado se proporcionan como guía para el desarrollo de su producción. El código no está certificado para uso en producción ni se admite oficialmente.</aside>
    <p>El video en CodePen a continuación usa el siguiente archivo WebVTT para definir subtítulos:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">WEBVTT

00:00.000 --&gt; 00:05.000 align:middle line:90%
The waves rhythmically pound against the rocks.

00:05.000 --&gt; 00:10.000 align:middle line:84%
Here in the quaint village of Yachats on the central Oregon coast.

00:10.000 --&gt; 00:15.000 align:middle line:84%
Come visit and enjoy the surf and sand.

00:15.000 --&gt; 00:19.000 align:middle line:84%
Remember, it never rains on the Oregon coast!</code></pre>
    <p>La muestra proporciona un <strong>Descargar transcripción</strong> en la barra de control que descarga un archivo de texto con el formato WebVTT eliminado del archivo. En esencia, permite al usuario descargar una transcripción de los subtítulos basada en una versión modificada del archivo WebVTT.</p>
    <!-- UPDATE codepen here -->
    
    <p class="codepen" data-height="478" data-theme-id="34967" data-default-tab="result" data-user="rcrooks1969" data-slug-hash="RdNJMq" style="height: 478px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid black; margin: 1em 0; padding: 1em;" data-pen-title="Download Transcript"><span>Ver la pluma <a href="https://codepen.io/team/rcrooks1969/pen/RdNJMq/"> Descargar transcripción</a> por Brightcove Learning Services (<a href="https://codepen.io/rcrooks1969"> rcrooks1969</a> ) en <a href="https://codepen.io">CodePen</a>.</span></p>
    <script async src="https://static.codepen.io/assets/embed/ei.js"></script><!-- UPDATE link to GitHub source -->
    
    <h3>Código fuente</h3>
          <p>Ver el <a href="https://github.com/BrightcoveLearning/18738-download-transcript">solución completa en GitHub</a>.</p>
    <aside class="bcls-aside bcls-aside--tip">
      <p>COMPORTAMIENTO DE DESCARGA DEL NAVEGADOR: Los navegadores han cambiado la forma en que manejan las descargas de archivos. Safari, Firefox y Chrome abren el vídeo descargado en una nueva ventana o pestaña, lo que generalmente no es un comportamiento deseado. Por este motivo, este ejemplo utiliza una herramienta JavaScript del lado del cliente para obligar a los navegadores a descargar correctamente el vídeo. Para obtener información detallada sobre la herramienta, consulte <a href="https://www.npmjs.com/package/downloadjs">https://www.npmjs.com/package/downloadjs</a>.</p>
    </aside>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Using_the_CodePen">Uso de CodePen</h2></summary>
      <p>Estos son algunos consejos para utilizar eficazmente el CodePen anterior:</p>
      <ul>
        <li>Cambie la visualización real del reproductor haciendo clic en el <strong translate="No">Resultado</strong> botón.</li>
        <li>Haga clic en el <strong translate="No">HTML / CSS / JS</strong> botones para mostrar UNO de los tipos de código.</li>
        <li>Más adelante, en este documento, la lógica, el flujo y el estilo utilizados en la aplicación se analizarán en la configuración de <a href="#Player/HTML_configuration">reproductor/HTML</a>, Flujo de <a href="#Application_flow">aplicaciones</a> y Estilo de <a href="#Application_styling">la aplicación.</a> secciones. La mejor manera de seguir la información de estas secciones es:
          <ol>
            <li>Haga clic en el <strong translate="No">EDITAR CODEPEN</strong> en el CodePen y tenga el código disponible en un navegador / pestaña del navegador.</li>
            <li>En CodePen, ajusta el código que quieres que se muestre. Puede cambiar el ancho de las distintas secciones de código dentro de CodePen.</li>
            <li>Ver el <a href="#Player/HTML_configuration">Configuración de reproductor / HTML</a> , <a href="#Application_flow">Flujo de aplicación</a> y / o <a href="#Application_styling">Estilo de aplicación</a> secciones en otra pestaña del navegador / navegador. Ahora podrá seguir las explicaciones del código y, al mismo tiempo, ver el código.</li>
          </ol>
        </li>
      </ul>
    </details>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Development_sequence">secuencia de desarrollo</h2></summary> 
      <p>Esta es la secuencia de desarrollo recomendada:</p>
      <ol>
        <li>Utilice la implementación del reproductor de incrustación en la página para probar la funcionalidad de su reproductor, complemento y CSS (si es necesario CSS)</li>
        <li>Coloque el JavaScript y CSS del plugin en archivos separados para pruebas locales</li>
        <li>Implementa el código del plugin y CSS en tu servidor una vez que hayas resuelto cualquier error.</li>
        <li>Usa Studio para agregar el plugin y CSS a tu reproductor</li>
        <li>Reemplace la implementación del reproductor de incrustación en página si determina que la implementación de iframe se ajusta mejor (se detalla en la siguiente sección)</li>
      </ol>
      <p>Para obtener más información sobre estos pasos, consulte la sección <a href="/coding-topics/step-step-plugin-development.html">Paso a paso: </a> Guía de desarrollo de plugins.</p>
      <h3>iframe o incrustación en página</h3>
      <p>Al desarrollar mejoras para Brightcove Player, deberás decidir si el código se ajusta mejor a la implementación de iframe o incrustación en la página. La recomendación de práctica recomendada es crear un complemento para usarlo con una implementación de iframe. Las ventajas de utilizar el reproductor iframe son:</p>
      <ul>
        <li>Sin colisiones con JavaScript y/o CSS existentes</li>
        <li>Responde automáticamente</li>
        <li>El iframe facilita el uso en aplicaciones de redes sociales (o siempre que el vídeo tenga que «viajar» a otras aplicaciones)</li>
      </ul>
      <p>Aunque la integración del reproductor de incrustación en la página puede ser más compleja, hay ocasiones en que planificará el código en torno a esa implementación. Para generalizar, este enfoque es mejor cuando la página que contiene necesita comunicarse con el reproductor. En concreto, estos son algunos ejemplos:</p>
      <ul>
        <li>El código de la página que contiene necesita escuchar y actuar en función de los eventos de los jugadores</li>
        <li>El reproductor utiliza estilos de la página que lo contiene</li>
        <li>El iframe hará que la lógica de la aplicación falle, como un redireccionamiento desde la página que contiene</li>
      </ul>
      <p>Incluso si tu implementación final no utiliza el código iframe, puedes seguir usando el código de incrustación en la página con un plugin para tu JavaScript y un archivo separado para tu CSS. Esto encapsula tu lógica para que puedas utilizarla fácilmente en varios reproductores.</p>
    </details>
  </section>
  <section class="bcls-section">
    <h2 id="API/Plugin_resources_used">Recursos de API/plugins utilizados</h2>
    <!-- UPDATE table, remove unneeded columns -->
    
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>Métodos API</th>
          <th>Eventos API</th>
          <th>Propiedades de API</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/module-events.html#.on">on ()</a></td>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#event:loadstart">inicio de carga</a></td>
          <td><a href="/references/video-metadata-mediainfo.html">player.media info</a></td>
        </tr>
        <tr>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/CustomControlSpacer.html#el">player.controlBar.customControlSpacer.el ()</a></td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
      </tbody>
    </table>
    <!-- <aside class="bcls-aside bcls-aside--tip">This code sample uses one of the Brightcove REST APIs. To understand working with this API it is vital you read and understand the <a href="/getting-started/learning-guide-using-rest-apis.html">Learning Guide: Using the REST APIs</a> document.</aside> --></section>
  <!-- UPDATE player and HTML configuration -->
  
  <section class="bcls-section">
    <h2 id="Player/HTML_configuration">Configuración de reproductor/HTML</h2>
    <p>En esta sección se detalla cualquier configuración especial necesaria durante la creación del reproductor. Además, se describen otros elementos HTML que deben agregarse a la página, más allá del código de implementación del reproductor de incrustación de la página.</p>
    <h3>Configuración del reproductor</h3>
    <p>No se requiere ninguna configuración especial para el reproductor de Brightcove que crea para este ejemplo.</p>
    <h3>Otros HTML</h3>
    <p>No se añaden otros elementos HTML a la página.</p>
  </section>
  <!-- UPDATE application flow -->
  
  <section class="bcls-section">
    <h2 id="Application_flow">Flujo de aplicaciones</h2>
    <p>La lógica básica detrás de esta aplicación es:</p>
    <ul>
      <li>Cree una expresión regular para eliminar el formato WebVTT del archivo.</li>
      <li>Esperen al <code translate="No">loadstart</code> evento y recupere la URL del archivo WebVTT de subtítulos.</li>
      <li>Construye un botón y colócalo en la barra de control.</li>
      <li>Al hacer clic en el botón, descargue el archivo WebVTT remoto usando un <code translate="No">XMLHttpRequest()</code> objeto.</li>
      <li>Utilizar el <code translate="No">download</code> Biblioteca JavaScript para que el navegador descargue el archivo.</li>
    </ul>
    <!-- UPDATE task 2 -->
    
    <h3>Definir la expresión regular</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
<code class="language-javascript" translate="No">// ### Define the regular expression ###</code></pre>
    <p>Debe crear una expresión regular para eliminar cualquier formato no deseado del archivo WebVTT. En este caso, la expresión regular elimina las líneas que comienzan con la forma estándar de definir horas en un archivo WEBVTT. Si no es un experto en expresiones regulares, puede encontrar <a href="https://regexr.com/">https://regexr.com/</a> de ayuda.</p>
    <!-- UPDATE task 1 -->
    
    <h3>Recuperar URL y obtener archivo</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
<code class="language-javascript" translate="No">// ### Retrieve the URL for the text track, which is in this case a WebVTT caption file ###</code></pre>
    <p>Debes esperar al <code translate="No">loadstart</code> evento para acceder al <code translate="No">mediainfo</code> propiedad, que contiene la información de la pista de texto. Tenga en cuenta que si la página se publica desde un (<strong>https</strong> ), debe modificar la URL del archivo para utilizar también una conexión segura. Una vez que tenga la URL correcta, llame al <code translate="No">getFile()</code> método que realmente devuelve el archivo. Finalmente, usa JavaScript <code translate="No">replace()</code> junto con la expresión regular para reformatear el texto.</p>
    <!-- UPDATE task 3 -->
    
    <h3>Construye un botón y colócalo en la barra de control.</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
<code class="language-javascript" translate="No">// ### Create button and place in player ###</code></pre>
    <p>Un HTML <strong>botón</strong> elemento se construye y se coloca en la barra de control. Tenga en cuenta que el <code translate="No">click</code> El detector de eventos también se agrega dinámicamente. En este caso, el botón se coloca en el <code translate="No">spacer</code> región de la barra de control. Para más detalles sobre el <code translate="No">spacer</code> , mira el <a href="/styling/customizing-player-appearance.html">Personalización de la apariencia del jugador</a> documento.</p>
    <!-- UPDATE task 4 -->
    
    <h3>Obtenga el archivo según la URL proporcionada</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
<code class="language-javascript" translate="No">// ### Function that gets the actual file based on URL ###</code></pre>
    <p>Esta función utiliza AJAX, a través de un <code translate="No">XMLHttpRequest</code> objeto, para recuperar el archivo. El comportamiento asincrónico dicta el uso de una función de devolución de llamada.</p>
    <!-- UPDATE task 5 -->
    
    <h3>Descargue el archivo modificado en la computadora del usuario</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
<code class="language-javascript" translate="No">// ### download function used for graceful browser download ###</code></pre>
    <p>Como se mencionó anteriormente en este documento, los navegadores predeterminados' comportamientos como lo más probable NO es lo que desea que suceda, es decir, se abre una nueva pestaña o ventana para mostrar el archivo. Esta herramienta JavaScript fuerza la descarga del archivo de texto.</p>
  </section>
  <!-- UPDATE CSS description -->
  
  <section class="bcls-section">
    <h2 id="Application_styling">Estilismo de aplicaciones</h2>
    <p>El CSS establece los colores y la posición de los botones en la barra de control.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Plugin_code">Código de plugin</h2>
    <p>Normalmente, al convertir JavaScript en un complemento de Brightcove Player, se necesitan cambios nominales. Un cambio necesario es reemplazar el uso estándar del <code translate="No">ready()</code> método por el código que define un complemento.</p>
    <p>Aquí está el código de inicio a JavaScript muy utilizado que funcionará con el reproductor:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.getPlayer('myPlayerID').ready(function() {
var myPlayer = this;
});</code></pre>
    <p>Cambiarás la primera línea para usar la sintaxis estándar para iniciar un plugin de Brightcove Player:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.registerPlugin('pluginName', function(options) {
var myPlayer = this;
...
});</code></pre>
    <!-- UPDATE path to plugin's JavaScript -->
    
    <p>Como se mencionó anteriormente, puede ver el código JavaScript del complemento en el repositorio de GitHub correspondiente de este documento: <a href="https://github.com/BrightcoveLearning/18738-download-transcript/blob/master/plugin/download-transcript.js">download-transcript.js</a>.</p>
    <h3>Uso del complemento con un reproductor</h3>
    <p>Una vez que tengas los archivos CSS y JavaScript del plugin almacenados en una ubicación accesible a Internet, puedes usar el plugin con un reproductor. En Studio's <strong>JUGADORES</strong> módulo puedes elegir un jugador, luego en el <strong>PLUGINS</strong> sección agregue las URL a los archivos CSS y JavaScript, y también agregue el <strong>Nombre</strong> y <strong>Opciones</strong> , si se necesitan opciones.</p>
    <aside class="bcls-aside bcls-aside--tip">Para obtener más información sobre el uso de Studio para asignar complementos a los reproductores, consulte la <a href="https://studio.support.brightcove.com/players/configuring-player-plugins.html">Configuración de complementos del reproductor</a> documento.</aside>
  </section>
</article>