---
title: 'Muestra de Brightcove Player: Activar el rebobinado con un evento personalizado'
description: 'En este tema, aprenderá a implementar un botón de rebobinado enviando y escuchando un evento personalizado.'
parent: Code Samples
---

<article class="bcls-article">
  <h1>Muestra de Brightcove Player: Activar el rebobinado con un evento personalizado</h1>
  <summary></summary>
  <section class="bcls-section">
    <h2 id="Overview">Resumen</h2>
    <aside class="bcls-aside bcls-aside--information">Este ejemplo y el código asociado se proporcionan como guía para el desarrollo de su producción. El código no está certificado para uso en producción ni se admite oficialmente.</aside>
    <p>Aunque Brightcove Player proporciona una serie de eventos listos para usar, es posible que desee utilizar sus propios eventos personalizados para desacoplar y eliminar las dependencias entre los objetos DOM y los detectores de eventos. Este modelo basado en eventos es una elección arquitectónica que quizás desee considerar.</p>
    <p>Esta muestra agrega un botón de retroceso a la barra de control. Cuando el usuario hace clic en el botón Atrás, se activa un evento personalizado junto con la cantidad de tiempo para rebobinar. El oyente de eventos personalizados encuentra la posición actual del video y rebobina el video.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Player_example">Ejemplo de jugador</h2>
    <!-- UPDATE description -->
    
    <p style="float:left">Inicia la reproducción de vídeo. Luego haga clic en el botón Atrás:</p>
    <div><img style="width:40px;height:40px;margin-top:-10px;" alt="rewind video button" src="/assets/images/code-samples/brightcove-player-sample-trigger-rewind-custom-event/back-button.png" /></div>
    <p style="clear:both;">Debería ver que la reproducción de video retrocede 5 segundos.</p>
    <!-- UPDATE codepen here -->
    
    <p data-height="475" data-theme-id="34967" data-slug-hash="mBWvKb" data-default-tab="result" data-user="bcls1969" data-embed-version="2" data-pen-title="18150-trigger-rewind-custom-event" class="codepen">Ver la pluma <a href="https://codepen.io/team/bcls1969/pen/mBWvKb/">18150-trigger-rewind-custom-event</a> por Brightcove Learning Services (<a href="https://codepen.io/team/rcrooks1969"> bcls1969</a> ) en <a href="https://codepen.io">CodePen</a>.</p>
    <script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script><!-- UPDATE link to GitHub source -->
    
    <h3>Código fuente</h3>
          <p>Ver el <a href="https://github.com/BrightcoveLearning/18150-trigger-rewind-custom-event">solución completa en GitHub</a>.</p>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Using_the_CodePen">Uso de CodePen</h2></summary>
      <p>Estos son algunos consejos para utilizar eficazmente el CodePen anterior:</p>
      <ul>
        <li>Cambie la visualización real del reproductor haciendo clic en el <strong translate="No">Resultado</strong> botón.</li>
        <li>Haga clic en el <strong translate="No">HTML / CSS / JS</strong> botones para mostrar UNO de los tipos de código.</li>
        <li>Más adelante, en este documento, la lógica, el flujo y el estilo utilizados en la aplicación se analizarán en la configuración de <a href="#Player/HTML_configuration">reproductor/HTML</a>, Flujo de <a href="#Application_flow">aplicaciones</a> y Estilo de <a href="#Application_styling">la aplicación.</a> secciones. La mejor manera de seguir la información de estas secciones es:
          <ol>
            <li>Haga clic en el <strong translate="No">EDITAR CODEPEN</strong> en el CodePen y tenga el código disponible en un navegador / pestaña del navegador.</li>
            <li>En CodePen, ajusta el código que quieres que se muestre. Puede cambiar el ancho de las distintas secciones de código dentro de CodePen.</li>
            <li>Ver el <a href="#Player/HTML_configuration">Configuración de reproductor / HTML</a> , <a href="#Application_flow">Flujo de aplicación</a> y / o <a href="#Application_styling">Estilo de aplicación</a> secciones en otra pestaña del navegador / navegador. Ahora podrá seguir las explicaciones del código y, al mismo tiempo, ver el código.</li>
          </ol>
        </li>
      </ul>
    </details>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Development_sequence">secuencia de desarrollo</h2></summary> 
      <p>Esta es la secuencia de desarrollo recomendada:</p>
      <ol>
        <li>Utilice la implementación del reproductor de incrustación en la página para probar la funcionalidad de su reproductor, complemento y CSS (si es necesario CSS)</li>
        <li>Coloque el JavaScript y CSS del plugin en archivos separados para pruebas locales</li>
        <li>Implementa el código del plugin y CSS en tu servidor una vez que hayas resuelto cualquier error.</li>
        <li>Usa Studio para agregar el plugin y CSS a tu reproductor</li>
        <li>Reemplace la implementación del reproductor de incrustación en página si determina que la implementación de iframe se ajusta mejor (se detalla en la siguiente sección)</li>
      </ol>
      <p>Para obtener más información sobre estos pasos, consulte la sección <a href="/coding-topics/step-step-plugin-development.html">Paso a paso: </a> Guía de desarrollo de plugins.</p>
      <h3>iframe o incrustación en página</h3>
      <p>Al desarrollar mejoras para Brightcove Player, deberás decidir si el código se ajusta mejor a la implementación de iframe o incrustación en la página. La recomendación de práctica recomendada es crear un complemento para usarlo con una implementación de iframe. Las ventajas de utilizar el reproductor iframe son:</p>
      <ul>
        <li>Sin colisiones con JavaScript y/o CSS existentes</li>
        <li>Responde automáticamente</li>
        <li>El iframe facilita el uso en aplicaciones de redes sociales (o siempre que el vídeo tenga que «viajar» a otras aplicaciones)</li>
      </ul>
      <p>Aunque la integración del reproductor de incrustación en la página puede ser más compleja, hay ocasiones en que planificará el código en torno a esa implementación. Para generalizar, este enfoque es mejor cuando la página que contiene necesita comunicarse con el reproductor. En concreto, estos son algunos ejemplos:</p>
      <ul>
        <li>El código de la página que contiene necesita escuchar y actuar en función de los eventos de los jugadores</li>
        <li>El reproductor utiliza estilos de la página que lo contiene</li>
        <li>El iframe hará que la lógica de la aplicación falle, como un redireccionamiento desde la página que contiene</li>
      </ul>
      <p>Incluso si tu implementación final no utiliza el código iframe, puedes seguir usando el código de incrustación en la página con un plugin para tu JavaScript y un archivo separado para tu CSS. Esto encapsula tu lógica para que puedas utilizarla fácilmente en varios reproductores.</p>
    </details>
  </section>
  <section class="bcls-section">
    <h2 id="API/Plugin_resources_used">Recursos de API/plugins utilizados</h2>
    <!-- UPDATE table, remove unneeded columns -->
    
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>Métodos API</th>
          <th>Eventos API</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/Spacer.html#addChild">spacer.appendChild ()</a></td>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/module-events.html#.trigger">gatillo</a></td>
        </tr>
        <tr>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#currentTime">Hora actual ()</a></td>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/module-events.html#.on">en</a></td>
        </tr>
      </tbody>
    </table>
  </section>
  <!-- UPDATE player and HTML configuration -->
  
  <section class="bcls-section">
    <h2 id="Player/HTML_configuration">Configuración de reproductor/HTML</h2>
    <p>En esta sección se detalla cualquier configuración especial necesaria durante la creación del reproductor. Además, se describen otros elementos HTML que deben agregarse a la página, más allá del código de implementación del reproductor de incrustación de la página.</p>
    <h3>Configuración del reproductor</h3>
    <p>No se requiere ninguna configuración especial para el reproductor de Brightcove que crea para este ejemplo.</p>
    <h3>Otros HTML</h3>
    <p>Recuerda añadir el <code translate="No">id</code> atributo a la <code translate="No">video-js</code> etiqueta en el código de inserción del reproductor.</p>
    <pre>
<code class="language-html" translate="No">&lt;video-js <span class="bcls-highlight">id="myPlayerID"</span>
...</code></pre>
  </section>
  <!-- UPDATE application flow -->
  
  <section class="bcls-section">
    <h2 id="Application_flow">Flujo de aplicaciones</h2>
    <p>La lógica básica detrás de esta aplicación es:</p>
    <ul>
      <li>Cree un nuevo elemento en el DOM para el botón de rebobinado.</li>
      <li>Agrega el botón de rebobinado a la barra de control del reproductor.</li>
      <li>Escuche cuando un usuario hace clic en el botón de rebobinado. Cuando se hace clic en él, activa tu evento personalizado con datos.</li>
      <li>Escuche el evento personalizado con datos y rebobine la reproducción de video según los datos definidos.</li>
    </ul>
    <!-- UPDATE task 1 -->
    
    <h3>Añadir elementos al DOM</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
<code class="language-javascript" translate="No">// +++ Add elements to the DOM +++</code></pre>
    <p>Crear un nuevo <code translate="No">&lt;div&gt;</code> elemento en el DOM y asignar un <code translate="No">id</code> atributo con un valor de <strong>botón de retroceso</strong>. Crear un nuevo <code translate="No">&lt;img&gt;</code> elemento en el DOM y asigne el <code translate="No">src</code> atributo con la URL a su botón de rebobinado.</p>
    <!-- UPDATE task 2 -->
    
    <h3>Agregue el botón de rebobinado a la barra de control</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
<code class="language-javascript" translate="No">// +++ Add rewind button to the control bar +++</code></pre>
    <p>Consigue el <code translate="No">spacer</code> en la barra de control y agregue los elementos del botón de rebobinado.</p>
    <!-- UPDATE task 3 -->
    
    <h3>Escuche el botón de rebobinado</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
<code class="language-javascript" translate="No">// +++ Listen for the rewind button +++</code></pre>
    <p>Hacia <code translate="No">backButton</code> elemento, agregue un oyente para el <code translate="No">onclick</code> evento. Cuando se hace clic en él, activa tu evento personalizado con datos.</p>
    <!-- UPDATE task 4 -->
    
    <h3>Escuche el evento de rebobinado</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
<code class="language-javascript" translate="No">// +++ Listen for rewind event +++</code></pre>
    <p>Escuche su evento personalizado con datos. Cuando se activa, rebobina la reproducción de video según el <code translate="No">rewindAmt</code> definido en el código ..</p>
  </section>
  <!-- UPDATE CSS description -->
  
  <section class="bcls-section">
    <h2 id="Application_styling">Estilismo de aplicaciones</h2>
    <p>CSS se utiliza para dimensionar el reproductor y para posicionar y dimensionar el botón de rebobinado en la barra de control.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Plugin_code">Código de plugin</h2>
    <p>Normalmente, al convertir JavaScript en un complemento de Brightcove Player, se necesitan cambios nominales. Un cambio necesario es reemplazar el uso estándar del <code translate="No">ready()</code> método por el código que define un complemento.</p>
    <p>Aquí está el código de inicio a JavaScript muy utilizado que funcionará con el reproductor:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.getPlayer('myPlayerID').ready(function() {
  var myPlayer = this;
  ...
});</code></pre>
    <p>Cambiarás la primera línea para usar la sintaxis estándar para iniciar un plugin de Brightcove Player:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.registerPlugin('pluginName', function(options) {
  var myPlayer = this;
  ...
});</code></pre>
    <!-- UPDATE path to plugin's JavaScript -->
    
    <p>Como se mencionó anteriormente, puede ver el código JavaScript del complemento en el repositorio de GitHub correspondiente de este documento: <a href="https://github.com/BrightcoveLearning/18150-trigger-rewind-custom-event/blob/master/plugin/custom-event.js">custom-event.js</a>.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Understanding_Custom_events">Comprensión de los eventos personalizados</h2>
    <p>Los eventos personalizados le permiten desacoplar y eliminar las dependencias entre los objetos DOM y los detectores de eventos, creando un modelo arquitectónico basado en eventos.</p>
    <h3>Envío</h3>
    <p>Para enviar un evento personalizado, use el <code translate="No">trigger()</code> método de la siguiente manera:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">// trigger a custom event
myPlayer.trigger('eventName');
or
// trigger a custom event with data
myPlayer.trigger('eventName', {data: 'some data'});</code></pre>
    <p>Para obtener detalles sobre el envío de eventos personalizados, consulte la <a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#trigger__anchor">Índice de la API del reproductor</a>.</p>
    <p>En este ejemplo, el código hace lo siguiente:</p>
    <ul>
      <li>Envía un evento personalizado, llamado <code translate="No">rewind</code></li>
      <li>Envía un objeto de datos con el nombre <code translate="No">amount</code> y un valor de <code translate="No">5</code> - Verá en el código JavaScript donde se establece este valor</li>
    </ul>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">// trigger a custom event with data
myPlayer.trigger('rewind', {'amount': rewindAmount});</code></pre>
    <h3>Escuchar</h3>
    <p>Para escuchar un evento personalizado, puede usar el <code translate="No">on()</code> método de la siguiente manera:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">// listen for a custom event
player.on('eventName', function(evt){});
or
// listen for a custom event with data
player.on('eventName', function(evt,data){});</code></pre>
    <p>También puede utilizar el <code translate="No">one()</code> si desea que el detector de eventos se active solo una vez y luego se elimine. Para obtener detalles sobre la escucha de eventos, consulte la <a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#on__anchor">Índice de la API del reproductor</a>.</p>
    <p>En este ejemplo, el código hace lo siguiente:</p>
    <ul>
      <li>Escucha un evento personalizado, llamado <code translate="No">rewind</code></li>
      <li>Pasa el evento y los objetos de datos a una función</li>
    </ul>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">// listen for a custom event with data
 myPlayer.on('rewind',function(evt,data){
});</code></pre>
    <p>Cuando muestre el evento y los objetos de datos en la consola, debería tener un aspecto similar a esto:</p>
    <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Custom event data" src="/assets/images/code-samples/brightcove-player-sample-trigger-rewind-custom-event/custom-event-data.png" />
      <figcaption class="bcls-caption--image">Datos de eventos personalizados</figcaption>
    </figure>
  </section>
</article>