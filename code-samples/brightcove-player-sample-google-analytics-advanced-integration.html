---
title: 'Muestra de Brightcove Player: Integración avanzada de Google Analytics'
description: 'En este tema, aprenderá a configurar el ID de seguimiento de Google Analytics de forma dinámica en tiempo de ejecución cuando utilice un reproductor Brightcove.'
parent: Code Samples
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Player_example">Ejemplo de jugador</h2>
<!-- UPDATE description -->

<aside class="bcls-aside bcls-aside--information">Este ejemplo y el código asociado se proporcionan como guía para su desarrollo de producción. El código no está certificado para uso en producción ni se admite oficialmente.</aside>

<p>Este ejemplo utiliza un reproductor de Brightcove y agrega Google Analytics mediante programación, asignando el ID de seguimiento de forma dinámica en tiempo de ejecución. Este enfoque es útil si tiene varias cuentas de GA pero no quiere un jugador único para cada una.</p>
<p>
   Al agregar GA de forma dinámica, no agregará el complemento de Google Analytics en Video Cloud Studio. Si lo configura en Studio, se inicializará al cargar el reproductor y será demasiado tarde para cambiar la configuración (no se pueden anular).
</p>
<p>
Otro beneficio de este enfoque es que nuestra integración de API no creará campos en su cuenta de GA (Google no le permitirá cambiar el nombre de los campos existentes).
</p>
<p>
  Cuando reemplaza el <code translate="No">tracker</code> valor en este ejemplo con su propio ID de seguimiento de Google Analytics, entonces debería ver las métricas en su página de Google Analytics.
</p>
<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Google Analytics home page" src="/assets/images/code-samples/brightcove-player-sample-google-analytics-advanced-integration/ga-home.png" />
  <figcaption class="bcls-caption--image">Página de inicio de Google Analytics</figcaption>
</figure>

<!-- UPDATE codepen here -->
<p class="codepen" data-height="465" data-theme-id="34967" data-default-tab="result" data-user="bcls1969" data-slug-hash="wvaQwRy" style="height: 465px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="Google Analytics Advanced Integration">
  <span>Ver la pluma <a href="https://codepen.io/team/bcls1969/pen/wvaQwRy"> Integración avanzada de Google Analytics</a> por Brightcove Learning Services (<a href="https://codepen.io/team/rcrooks1969"> bcls1969</a> ) en <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>
<br/>

<h3>Código fuente</h3>
<!-- UPDATE link to GitHub source -->
<p>
  Puede ver el código fuente seleccionando el <strong>HTML</strong> , <strong>CSS</strong> y <strong>JS</strong> botones en el CodePen arriba, o puede ver el <a href="https://github.com/BrightcoveLearning/google-analytics-advanced-integration">solución completa en GitHub</a>. 
</p>
</section>

<section class="bcls-section">
<h2 id="Using_the_CodePen" class="bcls-expander-head">Uso de CodePen</h2>

<div class="bcls-expander-content">
<p>Estos son algunos consejos para utilizar eficazmente el CodePen anterior:</p>

<ul>
	<li>Cambie la visualización real del reproductor haciendo clic en el <strong>Resultado</strong> botón.</li>
	<li>Haga clic en el <strong>HTML / CSS / JS</strong> botones para mostrar UNO de los tipos de código.</li>
	<li>Más adelante, en este documento, la lógica, el flujo y el estilo utilizados en la aplicación se analizarán en la configuración de <a href="#Player/HTML_configuration">reproductor/HTML</a>, Flujo de <a href="#Applicaton_flow">aplicaciones</a> y Estilo de <a href="#Application_styling">la aplicación.</a> secciones. La mejor manera de seguir la información de estas secciones es:
	<ol>
		<li>Haga clic en el <strong>EDITAR CODEPEN</strong> en el CodePen y tenga el código disponible en un navegador / pestaña del navegador.</li>
		<li>En CodePen, ajusta el código que quieres que se muestre. Puede cambiar el ancho de las distintas secciones de código dentro de CodePen.</li>
		<li>Ver el <a href="#Player/HTML_configuration">Configuración de reproductor / HTML</a> , <a href="#Applicaton_flow">Flujo de aplicación</a> y / o <a href="#Application_styling">Estilo de aplicación</a> secciones en otra pestaña del navegador / navegador. Ahora podrá seguir las explicaciones del código y, al mismo tiempo, ver el código.</li>
	</ol>
	</li>
</ul>
</div>
</section>

<section class="bcls-section">
<h2 id="developmentsequence" class="bcls-expander-head">secuencia de desarrollo</h2>

<div class="bcls-expander-content">
<p>Esta es la secuencia de desarrollo recomendada:</p>

<ol>
	<li>Utilice la implementación del reproductor de incrustación en la página para probar la funcionalidad de su reproductor, complemento y CSS (si es necesario CSS)</li>
	<li>Coloque el JavaScript y CSS del plugin en archivos separados para pruebas locales</li>
	<li>Implementa el código del plugin y CSS en tu servidor una vez que hayas resuelto cualquier error.</li>
	<li>Usa Studio para agregar el plugin y CSS a tu reproductor</li>
	<li>Reemplace la implementación del reproductor de incrustación en página si determina que la implementación de iframe se ajusta mejor (se detalla en la siguiente sección)</li>
</ol>

<p>Para obtener más información sobre estos pasos, consulte la sección <a href="https://player.support.brightcove.com/coding-topics/step-step-plugin-development.html">Paso a paso: </a> Guía de desarrollo de plugins.</p>

<h3>iframe o incrustación en página</h3>

<p>Al desarrollar mejoras para el reproductor de Brightcove, deberá decidir si el código es el más adecuado para la implementación de incrustación de iframe o in-page. La recomendación de práctica recomendada es crear un complemento para usarlo con una implementación de iframe. Las ventajas de utilizar el reproductor iframe son:</p>

<ul>
	<li>Sin colisiones con JavaScript y/o CSS existentes</li>
	<li>Responde automáticamente</li>
	<li>El iframe facilita el uso en aplicaciones de redes sociales (o siempre que el vídeo tenga que «viajar» a otras aplicaciones)</li>
</ul>

<p>Aunque la integración del reproductor de incrustación en la página puede ser más compleja, hay ocasiones en que planificará el código en torno a esa implementación. Para generalizar, este enfoque es mejor cuando la página que contiene necesita comunicarse con el reproductor. En concreto, estos son algunos ejemplos:</p>

<ul>
	<li>El código de la página que contiene necesita escuchar y actuar en función de los eventos de los jugadores</li>
	<li>El reproductor utiliza estilos de la página que lo contiene</li>
	<li>El iframe hará que la lógica de la aplicación falle, como un redireccionamiento desde la página que contiene</li>
</ul>

<p>Incluso si tu implementación final no utiliza el código iframe, puedes seguir usando el código de incrustación en la página con un plugin para tu JavaScript y un archivo separado para tu CSS. Esto encapsula tu lógica para que puedas utilizarla fácilmente en varios reproductores.</p>
</div>
<!-- id="expanderContent" --></section>

<section class="bcls-section">
<h2 id="API/Plugin_resources_used">Recursos de API/plugins utilizados</h2>
<!-- UPDATE table, remove unneeded columns -->

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>Métodos API</th>
			<th>Eventos API</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><a href="https://player.support.brightcove.com/plugins/plugin-registry.html">bcGa ()</a></td>
      <td>&nbsp;</td>
		</tr>
	</tbody>
</table>
</section>
<!-- UPDATE player and HTML configuration -->

<section class="bcls-section">
<h2 id="Player/HTML_configuration">Configuración de reproductor/HTML</h2>

<p>En esta sección se detalla cualquier configuración especial necesaria durante la creación del reproductor. Además, se describen otros elementos HTML que deben agregarse a la página, más allá del código de implementación del reproductor de incrustación de la página.</p>

<h3>Configuración del reproductor</h3>
<p>
  Para este ejemplo, se utiliza un reproductor Brightcove.
</p>
<ol class="bcls-tasklist-restart">
	<li>En Video Cloud Studio, navegue hasta el <strong>Jugadores</strong> módulo. Crea un nuevo jugador.</li>
  <li>
    <p>En la navegación del lado izquierdo, expanda <strong>Análisis de terceros</strong>. Para el <strong>Google analitico</strong> opción, <strong>NO HACER</strong> Seleccione <strong>Habilitar Google Analytics</strong>. Deje esta opción sin marcar. </p>
    <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Google Analytics in Studio" src="/assets/images/code-samples/brightcove-player-sample-google-analytics-advanced-integration/enable-ga.png" />
    	<figcaption class="bcls-caption--image">Google Analytics en Studio</figcaption>
    </figure>
  </li>
</ol>

<h3 id="Other_HTML">Otros HTML</h3>
<p>
  Se agregó un script después del código de inserción de Brightcove Player.
</p>
<ol class="bcls-tasklist-restart">
	<li>
    <p>
      Después del código de inserción del reproductor, agregue la siguiente secuencia de comandos para el complemento Brightcove Google Analytics. Estamos cargando el complemento manualmente en lugar de configurarlo en Video Cloud Studio.
    </p>
    <pre>
    <code class="language-javascript" translate="No">&lt;script src=&quot;//players.brightcove.net/videojs-bc-ga/1/videojs-bc-ga.min.js&quot;&gt;&lt;/script&gt;</code></pre>
  </li>
</ol>
</section>
<!-- UPDATE application flow -->

<section class="bcls-section">
<h2 id="Application_flow">Flujo de aplicaciones</h2>

<p>La lógica básica detrás de esta aplicación es:</p>

<ul>
	<li>Cree un Brightcove Player sin configurar el complemento de Google Analytics</li>
	<li>Cargue el complemento de Google Analytics manualmente</li>
  <li>Defina opciones para el complemento, incluidos los parámetros y eventos de los que desea realizar un seguimiento</li>
  <li>Establecer el identificador de seguimiento</li>
  <li>Reproduce tu video</li>
</ul>
<!-- UPDATE task 1 -->
<ol class="bcls-tasklist-restart">
	<li>
    <h4>Crea el reproductor</h4>
    <p>
      Si ya lo ha hecho, consulte la <a href="#Player/HTML_configuration">Configuración de reproductor / HTML</a> sección anterior para crear su reproductor en Studio.
    </p>
  </li>
  <li>
    <h4>
      Cargar el complemento
    </h4>
    <p>
      Ver el <a href="#Other_HTML">Otro HTML</a> sección anterior para agregar la secuencia de comandos del complemento de Google Analytics.
    </p>
  </li>
  <li>
    <h4>
      Definir opciones de complementos
    </h4>
    <p>
      En el <strong>JS</strong> sección del CodePen, busque el código donde está etiquetado:
    </p>
    <pre>
    <code class="language-javascript" translate="No">// Set up the Google Analytics plugin options</code></pre>
    <p>
      El jugador llama al <a href="https://player.support.brightcove.com/plugins/plugin-registry.html">método bcGa ()</a> para inicializar el complemento. Tenga en cuenta que puede establecer parámetros y eventos de los que desea realizar un seguimiento.
    </p>
<pre class="line-numbers">
<code class="language-javascript" translate="No">myPlayer.bcGa({
  &quot;paramsToTrack&quot;: {
    &quot;bcvideo_video_seconds_viewed&quot;: &quot;dimension7&quot;,
    &quot;bcvideo_range&quot;: &quot;dimension8&quot;,
    &quot;bcvideo_video_duration&quot;: &quot;dimension9&quot;,
    &quot;bcvideo_player&quot;: &quot;dimension10&quot;,
    &quot;bcvideo_account&quot;: &quot;dimension11&quot;,
    &quot;bcvideo_session&quot;: &quot;dimension12&quot;,
    &quot;bcvideo_platform_version&quot;: &quot;dimension13&quot;
  },
  &quot;eventsToTrack&quot;: {
    &quot;video_impression&quot;: &quot;Video Impression&quot;,
    &quot;play_request&quot;: &quot;Play Request&quot;,
    &quot;video_engagement&quot;: &quot;Video Engagement&quot;,
    &quot;ad_start&quot;: &quot;Ad Start&quot;,
    &quot;ad_end&quot;: &quot;Ad End&quot;,
    &quot;player_load&quot;: &quot;Player Load&quot;,
    &quot;error&quot;: &quot;Error&quot;
  },
  &quot;tracker&quot;: &quot;UA-150904906-1&quot;
})
/*
	Two extra events can be added:
		video_view
		video_complete
*/</code></pre>
<p>
  Para obtener detalles sobre eventos y dimensiones, consulte la <a href="https://studio.support.brightcove.com/players/configuring-google-analytics-event-tracking.html#events">Configuración del seguimiento de eventos de Google Analytics</a> documento.
</p>
  </li>
  <li>
    <h4>
      Establecer el identificador de seguimiento
    </h4>
    <p>
      En el código JavaScript anterior, reemplace el <code translate="No">tracker</code> valor con su ID de seguimiento de Google Analytics.
    </p>
    <pre>
    <code class="language-javascript" translate="No">&quot;tracker&quot;: &quot;<span class="bcls-input">your tracking id</span>&quot;</code></pre>
  </li>
  <li>
    <p>
      Coloque el código HTML y JavaScript en su página web y reproduzca su video. Deberías ver métricas en tu
    </p>
  </li>
</ol>

</section>
<!-- UPDATE CSS description -->

<!-- <section class="bcls-section">
<h2 id="Application_styling">Application styling</h2>

<p>The CSS positions the player to cover the entire background of the web page. It also positions and styles the text block which sits on top of the player.</p>
</section> -->

<section class="bcls-section">
<h2 id="Plugin_code">Código de plugin</h2>

<p>Normalmente, al convertir JavaScript en un complemento de Brightcove Player, se necesitan cambios nominales. Un cambio necesario es reemplazar el uso estándar del <code translate="No">ready()</code> método por el código que define un complemento.</p>

<p>Aquí está el código de inicio a JavaScript muy utilizado que funcionará con el reproductor:</p>

<pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.getPlayer('myPlayerID').ready(function() {
  var myPlayer = this;
  ...
});</code></pre>

<p>Cambiarás la primera línea para usar la sintaxis estándar para iniciar un plugin de Brightcove Player:</p>

<pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.registerPlugin('pluginName', function(options) {
  var myPlayer = this;
  ...
});</code></pre>
<!-- UPDATE path to plugin's JavaScript -->

<p>Como se mencionó anteriormente, puede ver el código JavaScript del complemento en el repositorio de GitHub correspondiente de este documento: <a href="https://github.com/BrightcoveLearning/google-analytics-advanced-integration/blob/master/plugin/advanced-ga.js">advanced-ga.js</a>.</p>

<h3>Uso del complemento con un reproductor</h3>

<p>Una vez que tengas los archivos CSS y JavaScript del plugin almacenados en una ubicación accesible a Internet, puedes usar el plugin con un reproductor. En Studio's <strong>JUGADORES</strong> módulo puedes elegir un jugador, luego en el <strong>PLUGINS</strong> sección agregue las URL a los archivos CSS y JavaScript, y también agregue el <strong>Nombre</strong> y <strong>Opciones</strong> , si se necesitan opciones.</p>

<aside class="bcls-aside bcls-aside--tip">Para obtener más información sobre el uso de Studio para asignar complementos a los reproductores, consulte la <a href="https://studio.support.brightcove.com/players/configuring-player-plugins.html">Configuración de complementos del reproductor</a> documento.</aside>
</section>
</article>