---
title: 'Muestra de Brightcove Player: Reproducción automática con botón de activación de silencio'
description: 'En este tema, aprenderá cómo iniciar automáticamente un video en todas las plataformas y dispositivos. Si está en iOS o Safari, el video comenzará silenciado y se mostrará un botón que, al hacer clic, reactivará el video.'
parent: Code Samples
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <aside class="bcls-aside bcls-aside--information">A partir de abril de 2018, Chrome detuvo la reproducción automática de videos sin silenciar. Tenga en cuenta que existen circunstancias especiales en las que Chrome puede reproducir automáticamente un video sin silenciar. Ver Google <a href="https://developers.google.com/web/updates/2017/09/autoplay-policy-changes">Cambios en la política de reproducción automática</a> documento para obtener todos los detalles.</aside>
    <h2 id="Player_example">Ejemplo de jugador</h2>
    <!-- UPDATE description -->
    
    <aside class="bcls-aside bcls-aside--information">Este ejemplo y el código asociado se proporcionan como guía para el desarrollo de su producción. El código no está certificado para uso en producción ni se admite oficialmente.</aside>
    <p>El siguiente video se comportará de manera diferente según el navegador / plataforma en la que ejecute el video. Si el vídeo se reproduce automáticamente con audio, lo hace. De lo contrario, verá que el video comienza a reproducirse, pero aparecerá un botón para activar el sonido. Si hace clic en ese botón, escuchará el audio del video. Generalmente, cuando se usa iOS, Safari o Chrome, un video NO se reproducirá automáticamente si el video no está silenciado. Esta muestra muestra una forma de reproducir automáticamente el video y presenta un botón obvio para dejar de silenciar.</p>
    <p>Si está utilizando un pre-roll IMA3, querrá ver el <a href="#Using_a_pre-roll_ad">Usar un anuncio pre-roll</a> sección de este documento. Esta sección detalla los cambios menores que deberá aplicar al código que se muestra en el siguiente CodePen para que la funcionalidad funcione con un anuncio previo al video de IMA.</p>
    <!-- UPDATE codepen here -->
    
    <p data-height="456" data-theme-id="34967" data-slug-hash="jzmWzL" data-default-tab="result" data-user="rcrooks1969" data-embed-version="2" data-pen-title="Autoplay with Unmute Button" class="codepen">Ver la prisma <a href="https://codepen.io/team/rcrooks1969/pen/jzmWzL/">Reproducción automática con botón de activación de silencio</a> por Brightcove Learning Services (<a href="https://codepen.io/rcrooks1969"> rcrooks1969</a> ) en <a href="https://codepen.io">CodePen</a>.</p>
    <script async src="https://static.codepen.io/assets/embed/ei.js"></script>
    
    <h3>Código fuente</h3>
          <p>Ver el <a href="https://github.com/BrightcoveLearning/18567-autoplay-unmute-button">solución completa en GitHub</a>.</p>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Using_the_CodePen">Uso de CodePen</h2></summary>
      <p>Estos son algunos consejos para utilizar eficazmente el CodePen anterior:</p>
      <ul>
        <li>Cambie la visualización real del reproductor haciendo clic en el <strong translate="No">Resultado</strong> botón.</li>
        <li>Haga clic en el <strong translate="No">HTML / CSS / JS</strong> botones para mostrar UNO de los tipos de código.</li>
        <li>Más adelante, en este documento, la lógica, el flujo y el estilo utilizados en la aplicación se analizarán en la configuración de <a href="#Player/HTML_configuration">reproductor/HTML</a>, Flujo de <a href="#Application_flow">aplicaciones</a> y Estilo de <a href="#Application_styling">la aplicación.</a> secciones. La mejor manera de seguir la información de estas secciones es:
          <ol>
            <li>Haga clic en el <strong translate="No">EDITAR CODEPEN</strong> en el CodePen y tenga el código disponible en un navegador / pestaña del navegador.</li>
            <li>En CodePen, ajusta el código que quieres que se muestre. Puede cambiar el ancho de las distintas secciones de código dentro de CodePen.</li>
            <li>Ver el <a href="#Player/HTML_configuration">Configuración de reproductor / HTML</a> , <a href="#Application_flow">Flujo de aplicación</a> y / o <a href="#Application_styling">Estilo de aplicación</a> secciones en otra pestaña del navegador / navegador. Ahora podrá seguir las explicaciones del código y, al mismo tiempo, ver el código.</li>
          </ol>
        </li>
      </ul>
    </details>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Development_sequence">secuencia de desarrollo</h2></summary> 
      <p>Esta es la secuencia de desarrollo recomendada:</p>
      <ol>
        <li>Utilice la implementación del reproductor de incrustación en la página para probar la funcionalidad de su reproductor, complemento y CSS (si es necesario CSS)</li>
        <li>Coloque el JavaScript y CSS del plugin en archivos separados para pruebas locales</li>
        <li>Implementa el código del plugin y CSS en tu servidor una vez que hayas resuelto cualquier error.</li>
        <li>Usa Studio para agregar el plugin y CSS a tu reproductor</li>
        <li>Reemplace la implementación del reproductor de incrustación en página si determina que la implementación de iframe se ajusta mejor (se detalla en la siguiente sección)</li>
      </ol>
      <p>Para obtener más información sobre estos pasos, consulte la sección <a href="/coding-topics/step-step-plugin-development.html">Paso a paso: </a> Guía de desarrollo de plugins.</p>
      <h3>iframe o incrustación en página</h3>
      <p>Al desarrollar mejoras para Brightcove Player, deberás decidir si el código se ajusta mejor a la implementación de iframe o incrustación en la página. La recomendación de práctica recomendada es crear un complemento para usarlo con una implementación de iframe. Las ventajas de utilizar el reproductor iframe son:</p>
      <ul>
        <li>Sin colisiones con JavaScript y/o CSS existentes</li>
        <li>Responde automáticamente</li>
        <li>El iframe facilita el uso en aplicaciones de redes sociales (o siempre que el vídeo tenga que «viajar» a otras aplicaciones)</li>
      </ul>
      <p>Aunque la integración del reproductor de incrustación en la página puede ser más compleja, hay ocasiones en que planificará el código en torno a esa implementación. Para generalizar, este enfoque es mejor cuando la página que contiene necesita comunicarse con el reproductor. En concreto, estos son algunos ejemplos:</p>
      <ul>
        <li>El código de la página que contiene necesita escuchar y actuar en función de los eventos de los jugadores</li>
        <li>El reproductor utiliza estilos de la página que lo contiene</li>
        <li>El iframe hará que la lógica de la aplicación falle, como un redireccionamiento desde la página que contiene</li>
      </ul>
      <p>Incluso si tu implementación final no utiliza el código iframe, puedes seguir usando el código de incrustación en la página con un plugin para tu JavaScript y un archivo separado para tu CSS. Esto encapsula tu lógica para que puedas utilizarla fácilmente en varios reproductores.</p>
    </details>
  </section>
  <section class="bcls-section">
    <h2 id="API/Plugin_resources_used">Recursos de API/plugins utilizados</h2>
    <!-- UPDATE table, remove unneeded columns -->
    
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>Métodos API</th>
          <th>Eventos API</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#muted">silenciado ()</a></td>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#event:loadedmetadata">metadatos cargados</a></td>
        </tr>
        <tr>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#play">jugar ()</a></td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/module-events.html#.on">on ()</a></td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#volume">volumen()</a></td>
          <td>&nbsp;</td>
        </tr>
      </tbody>
    </table>
    <!-- <aside class="bcls-aside bcls-aside--tip">This code sample uses one of the Brightcove REST APIs. To understand working with this API it is vital you read and understand the <a href="/getting-started/learning-guide-using-rest-apis.html">Learning Guide: Using the REST APIs</a> document.</aside> --></section>
  <!-- UPDATE player and HTML configuration -->
  
  <section class="bcls-section">
    <h2 id="Player/HTML_configuration">Configuración de reproductor/HTML</h2>
    <p>En esta sección se detalla cualquier configuración especial necesaria durante la creación del reproductor. Además, se describen otros elementos HTML que deben agregarse a la página, más allá del código de implementación del reproductor de incrustación de la página.</p>
    <h3>Configuración del reproductor</h3>
    <p>Además de la inclusión estándar de un <code translate="No">id</code> en el <code translate="No">video</code> etiqueta, la <code translate="No">playsinline</code> se agrega el atributo para la funcionalidad de iOS:</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;div id="playerContainer" class="outer"&gt;
   &lt;video-js <span class="bcls-highlight">id="myPlayerID"</span>
     data-video-id="5755775186001"
     data-account="1752604059001"
     data-player="default"
     data-embed="default"
     data-application-id
     class="video-js"
     controls
     <span class="bcls-highlight">playsinline</span>&gt;&lt;/video-js&gt;
&lt;/div&gt;</code></pre>
    <h3>Otros HTML</h3>
    <p>No se agregan a la página otros elementos HTML, aparte de los mencionados en la sección anterior.</p>
  </section>
  <!-- UPDATE application flow -->
  
  <section class="bcls-section">
    <h2 id="Application_flow">Flujo de aplicaciones</h2>
    <p>La lógica básica detrás de esta aplicación es:</p>
    <ul>
      <li>Utilizar el <code translate="No">play()</code> método para intentar reproducir el vídeo. La llamada al método se asigna a una variable, que contendrá el valor devuelto por un JavaScript. <a href="/playback/autoplay-considerations.html#Programmatic_autoplay_detection">promesa</a>.</li>
      <li>Si la promesa se resuelve (el video se está reproduciendo), active el sonido del reproductor y configure el nivel de volumen.</li>
      <li>Si la promesa es rechazada (el video NO se está reproduciendo), realice lo siguiente:
        <ul>
          <li>Silencie el reproductor e inicie la reproducción del video (lo que hará ahora ya que el reproductor está silenciado).</li>
          <li>Cree dinámicamente un elemento de botón HTML, que actúa como el <strong>activar el sonido</strong> botón.</li>
          <li>Agrega un&nbsp;<code translate="No">click</code> oyente de eventos en el botón.</li>
          <li>Configure el texto, el estilo, etc. del botón</li>
          <li>Coloque el botón sobre el jugador.</li>
        </ul>
      </li>
    </ul>
    <h3>Intenta reproducir el video</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
<code class="language-javascript" translate="No">// ### Wait for loadedmetadata then try to play video ###</code></pre>
    <p>Según el procedimiento estándar, espere a que <code translate="No">loadedmetadata</code> evento antes de usar el <code translate="No">play()</code> método. La promesa devuelta por la llamada al método se almacena en el <code translate="No">promise</code> variable. Si el video se está reproduciendo, puede activar el sonido del reproductor y configurar el volumen.</p>
    <h3>Cuando se evita la reproducción automática, silencia el reproductor y reproduce el video</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
<code class="language-javascript" translate="No">// ### If autoplay prevented: mute the video, play video and display unmute button ###</code></pre>
    <p>Aquí el <code translate="No">catch</code> La lógica de la promesa te permite actuar cuando el video no comenzó en el reproductor. El reproductor se silencia mediante programación, por lo que se reproducirá el video. La <code translate="No">play()</code> se vuelve a llamar al método, que iniciará el vídeo. Siguiendo este código, el botón se crea y configura dinámicamente.</p>
    <h3>Agrega un <code translate="No">click</code> oyente de eventos al botón</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
<code class="language-javascript" translate="No">// ### Add button's event listener ###</code></pre>
    <p>Usando JavaScript <code translate="No">addEventListener()</code> , el controlador de eventos para un clic se crea dinámicamente. En el controlador de eventos, se activa el sonido del reproductor, se establece el nivel de volumen y, por último, se elimina el botón del DOM.</p>
    <!-- UPDATE task 3 -->
    
    <h3>Configurar el botón</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
<code class="language-javascript" translate="No">// ###  Configure the button ###</code></pre>
    <p>En esta sección de código se establece la etiqueta del botón, se configura el aspecto del botón y se <code translate="No">class</code> se agrega para una referencia CSS que posiciona el botón.</p>
    <!-- UPDATE task 3 -->
    
    <h3>Agrega el botón al contenedor</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
<code class="language-javascript" translate="No">// ### Add the button to the container ###</code></pre>
    <p>La única línea de código coloca el botón en el <code translate="No">div</code> eso restringe al jugador.</p>
    <!-- UPDATE task 3 --></section>
  <!-- UPDATE CSS description -->
  
  <section class="bcls-section">
    <h2 id="Using_a_pre-roll_ad">Usar un anuncio pre-roll</h2>
    <p>Dado que el anuncio se está reproduciendo cuando aparece el botón para activar el sonido, debe activar el reproductor de anuncios en lugar del reproductor de contenido. Para hacer esto, usaría lo siguiente para el controlador de clics:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">button.addEventListener("click", function() {
  <span class="bcls-highlight">myPlayer.ima3.adPlayer.muted(false);
  myPlayer.ima3.adPlayer.volume(volumeLevel);</span>
  //myPlayer.muted(false);
  //myPlayer.volume(volumeLevel);
  playerContainer.removeChild(button);
}</code></pre>
    <p>Las dos líneas de código para el control de volumen del reproductor de contenido se comentan y se dejan solo a modo de comparación.</p>
    <p>No es necesario que realice el mismo cambio para el código que no sea de iOS / Safari / Chrome, ya que el volumen se modifica ANTES de que se cargue el anuncio (en el <code translate="No">loadstart</code> evento), y esos cambios se transmiten al reproductor de anuncios cuando se carga.</p>
    <p>Mira esto <a href="https://codepen.io/team/rcrooks1969/pen/xWzPJX">CodePen</a> para un ejemplo práctico.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Application_styling">Estilismo de aplicaciones</h2>
    <p>Los tres selectores de CSS realizan lo siguiente:</p>
    <ul>
      <li>Configura el video <code translate="No">height</code> y <code translate="No">width</code> a <strong>100%</strong> para llenar el recipiente en el que se coloca.</li>
      <li>Crea un selector de clases que se usa con el <code translate="No">div</code> que rodea al jugador. Los valores utilizados corresponden al tamaño del jugador.</li>
      <li>Crea otro selector de clase que coloca el botón de activación de silencio en el centro de la <code translate="No">div</code> que rodea al jugador.</li>
    </ul>
  </section>
  <section class="bcls-section">
    <h2 id="Plugin_code">Código de plugin</h2>
    <p>Normalmente, al convertir JavaScript en un complemento de Brightcove Player, se necesitan cambios nominales. Un cambio necesario es reemplazar el uso estándar del <code translate="No">ready()</code> método por el código que define un complemento.</p>
    <p>Aquí está el código de inicio a JavaScript muy utilizado que funcionará con el reproductor:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.getPlayer('myPlayerID').ready(function() {
  var myPlayer = this;
  ...
});</code></pre>
    <p>Cambiarás la primera línea para usar la sintaxis estándar para iniciar un plugin de Brightcove Player:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.registerPlugin('pluginName', function(options) {
  var myPlayer = this;
  ...
});</code></pre>
    <!-- UPDATE path to plugin's JavaScript -->
    
    <p>Como se mencionó anteriormente, puede ver el código JavaScript del complemento en el repositorio de GitHub correspondiente de este documento: <a href="https://github.com/BrightcoveLearning/18567-autoplay-unmute-button-iossafari/blob/master/plugin/unmute-button.js">unmute-button.js</a>.</p>
    <h3>Uso del complemento con un reproductor</h3>
    <p>Una vez que tengas los archivos CSS y JavaScript del plugin almacenados en una ubicación accesible a Internet, puedes usar el plugin con un reproductor. En Studio's <strong>JUGADORES</strong> módulo puedes elegir un jugador, luego en el <strong>PLUGINS</strong> sección agregue las URL a los archivos CSS y JavaScript, y también agregue el <strong>Nombre</strong> y <strong>Opciones</strong> , si se necesitan opciones.</p>
    <aside class="bcls-aside bcls-aside--tip">Para obtener más información sobre el uso de Studio para asignar complementos a los reproductores, consulte la <a href="https://studio.support.brightcove.com/players/configuring-player-plugins.html">Configuración de complementos del reproductor</a> documento.</aside>
  </section>
</article>