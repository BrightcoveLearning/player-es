---
title: 'Muestra de Brightcove Player: Desplazamiento del reproductor a la vista con anuncios'
description: 'En este tema, aprenderá a usar un Brightcove Player que comienza a reproducir el video o el anuncio tan pronto como desplaza completamente el reproductor a la vista, y detiene el video o el anuncio cuando lo desplaza fuera de la vista. La API de Brightcove Player <code translate="No">play()</code> y <code translate="No">pause()</code> Se llaman métodos para iniciar y detener el video según la posición del reproductor.'
parent: Code Samples
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="Player_example">Ejemplo de jugador</h2>
    <!-- UPDATE description -->
    
    <aside class="bcls-aside bcls-aside--information">Este ejemplo y el código asociado se proporcionan como guía para el desarrollo de su producción. El código no está certificado para uso en producción ni se admite oficialmente.</aside>
    <p>Desplázate hacia dentro y fuera de la vista por el reproductor. Cuando el reproductor esté completamente desplazado a la vista, el video o anuncio comenzará a reproducirse. Cuando desplaza el reproductor fuera de la vista, el video o anuncio dejará de reproducirse. En este ejemplo, hay un pre-roll, un mid-roll que se puede omitir a los cinco segundos y un post-roll.</p>
    <aside class="bcls-aside bcls-aside--information">Nota: La muestra de código <a href="/code-samples/brightcove-player-sample-scrolling-player-view-ads.html">Muestra de jugador de Brightcove: Desplazamiento del reproductor a la vista</a> es muy similar a esta muestra, excepto que NO utiliza anuncios IMA3.</aside>
    <!-- UPDATE codepen here -->
    
    <p data-height="480" data-theme-id="34967" data-slug-hash="wpBEae" data-default-tab="result" data-user="rcrooks1969" data-embed-version="2" data-pen-title="18352-scrolling-player-view-ads" class="codepen">Ver la pluma <a href="https://codepen.io/team/rcrooks1969/pen/wpBEae/">18352-reproductor-de-desplazamiento-vista-anuncios</a> por Brightcove Learning Services (<a href="https://codepen.io/rcrooks1969"> rcrooks1969</a> ) en <a href="https://codepen.io">CodePen</a>.</p>
    <script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script><!-- UPDATE link to GitHub source -->
    
    <h3>Código fuente</h3>
          <p>Ver el <a href="https://github.com/BrightcoveLearning/18352-scrolling-player-view-ads">solución completa en GitHub</a>.</p>
    <aside class="bcls-aside bcls-aside--information">No se mostrará una implementación de iframe para esta funcionalidad, ya que el código de desplazamiento interactúa con los elementos de la página.</aside>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Using_the_CodePen">Uso de CodePen</h2></summary>
      <p>Estos son algunos consejos para utilizar eficazmente el CodePen anterior:</p>
      <ul>
        <li>Cambie la visualización real del reproductor haciendo clic en el <strong translate="No">Resultado</strong> botón.</li>
        <li>Haga clic en el <strong translate="No">HTML / CSS / JS</strong> botones para mostrar UNO de los tipos de código.</li>
        <li>Más adelante, en este documento, la lógica, el flujo y el estilo utilizados en la aplicación se analizarán en la configuración de <a href="#Player/HTML_configuration">reproductor/HTML</a>, Flujo de <a href="#Application_flow">aplicaciones</a> y Estilo de <a href="#Application_styling">la aplicación.</a> secciones. La mejor manera de seguir la información de estas secciones es:
          <ol>
            <li>Haga clic en el <strong translate="No">EDITAR CODEPEN</strong> en el CodePen y tenga el código disponible en un navegador / pestaña del navegador.</li>
            <li>En CodePen, ajusta el código que quieres que se muestre. Puede cambiar el ancho de las distintas secciones de código dentro de CodePen.</li>
            <li>Ver el <a href="#Player/HTML_configuration">Configuración de reproductor / HTML</a> , <a href="#Application_flow">Flujo de aplicación</a> y / o <a href="#Application_styling">Estilo de aplicación</a> secciones en otra pestaña del navegador / navegador. Ahora podrá seguir las explicaciones del código y, al mismo tiempo, ver el código.</li>
          </ol>
        </li>
      </ul>
    </details>
  </section>
  <section class="bcls-section">
    <h2 id="API/Plugin_resources_used">Recursos de API/plugins utilizados</h2>
    <!-- UPDATE table, remove unneeded columns -->
    
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>Métodos API</th>
          <th>Complementos de Brightcove Player</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#play">jugar ()</a></td>
          <td><a href="/plugins/advertising-ima3-plugin.html">Complemento IMA3</a></td>
        </tr>
        <tr>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#event:pause">pausa ()</a></td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><a href="https://docs.brightcove.com/brightcove-player/current-release/module-events.html#.on">on ()</a></td>
          <td>&nbsp;</td>
        </tr>
      </tbody>
    </table>
    <p>Un evento JavaScript clave utilizado en este código es <code translate="No">onscroll</code>. Este evento se distribuye y, en este código, se gestiona cada vez que se desplaza el <code translate="No">window</code> elemento.</p>
    <aside class="bcls-aside bcls-aside--warning">
      <h4>Bibliotecas de terceros utilizadas en este ejemplo</h4>
      <p>Nota: En este ejemplo se utilizan bibliotecas de terceros para simplificar el código JavaScript. Brightcove no admite estas bibliotecas. Todas las funciones se pueden reproducir en JavaScript normal.</p>
      <ul>
        <li><a href="https://jquery.org">jQuery</a></li>
      </ul>
    </aside>
    <!-- <aside class="bcls-aside bcls-aside--tip">This code sample uses one of the Brightcove REST APIs. To understand working with this API it is vital you read and understand the <a href="/getting-started/learning-guide-using-rest-apis.html">Learning Guide: Using the REST APIs</a> document.</aside> --></section>
  <!-- UPDATE player and HTML configuration -->
  
  <section class="bcls-section">
    <h2 id="Player/HTML_configuration">Configuración de reproductor/HTML</h2>
    <p>En esta sección se detalla cualquier configuración especial necesaria durante la creación del reproductor. Además, se describen otros elementos HTML que deben agregarse a la página, más allá del código de implementación del reproductor de incrustación de la página.</p>
    <h3>Configuración del reproductor</h3>
    <p>El <code translate="No">muted</code> atributo se ha añadido al reproductor para evitar problemas de reproducción automática. Ver el <a href="/playback/autoplay-considerations.html">Consideraciones sobre la reproducción automática</a> documento para más detalles.</p>
    <h3>Otros HTML</h3>
    <p>Un HTML <code translate="No">&lt;script&gt;</code> La etiqueta se utiliza para importar la biblioteca jQuery y JavaScript para el complemento IMA3. En los HTML <code translate="No">head</code> sección el CSS de IMA3 se importa usando un HTML <code translate="No">&lt;link&gt;</code> etiqueta.</p>
  </section>
  <!-- UPDATE application flow -->
  
  <section class="bcls-section">
    <h2 id="Application_flow">Flujo de aplicaciones</h2>
    <p>La lógica básica detrás de esta aplicación es:</p>
    <ul>
      <li>Configure el complemento IMA3.</li>
      <li>Escucha eventos de scroll.</li>
      <li>Cuando se gestiona un evento de desplazamiento, comprueba si el reproductor está en la ventana gráfica o no.</li>
      <li>Si el reproductor está en la ventana gráfica, reproduzca el vídeo, si no lo está, pausa el vídeo.</li>
      <li>Realice un seguimiento de los eventos publicitarios para determinar si el reproductor Brightcove Player normal o el reproductor publicitario se están utilizando actualmente.</li>
    </ul>
    <!-- UPDATE task 1 -->
    
    <h3>Configurar el complemento IMA3</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
<code class="language-javascript" translate="No">// ### Configure IMA3 plugin</code></pre>
    <p>El complemento IMA3 está configurado para usar una configuración de VMAP que reproducirá un pre, mid- y post-roll.</p>
    <!-- UPDATE task 1 -->
    
    <h3>Escuche cualquier evento de desplazamiento en el <strong>ventana</strong> elemento</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
<code class="language-javascript" translate="No">// ### Execute every time page is scrolled ###</code></pre>
    <p>Esta línea de código llama al <code translate="No">checkIfVideoInView()</code> método en cada envío de <code translate="No">window.onscroll</code> eventos.</p>
    <!-- UPDATE task 2 -->
    
    <h3>Gestionar los eventos de desplazamiento</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
<code class="language-javascript" translate="No">// ### Called on scroll, check if in view and the play/pause ###</code></pre>
    <p>La <code translate="No">checkIfVideoInView()</code> La función del controlador de eventos generalmente verifica si el reproductor está en la ventana gráfica y luego reproduce o pausa el video. Es fundamental que el código determine qué reproductor se está utilizando, el reproductor normal o el reproductor de anuncios. El valor booleano <code translate="No">isAdPlaying</code> se alterna según los eventos de anuncios (en el controlador de eventos en la parte inferior del código), luego se usa un operador condicional (ternario) para asignar el <code translate="No">currentPlayer</code> variable el jugador correcto. El <code translate="No">isScrolledIntoView()</code> método se utiliza en una instrucción if para comprobar si el reproductor está en la ventana gráfica. Naturalmente, el <code translate="No">isScrolledIntoView()</code> método devuelve un valor booleano.</p>
    <!-- UPDATE task 3 -->
    
    <h3>Comprueba si el reproductor está completamente en la ventana gráfica</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
<code class="language-javascript" translate="No">// ### Checks if player is in view ###</code></pre>
    <p>Esta función, que devuelve un valor booleano, utiliza jQuery para determinar si el reproductor está completamente en la ventana gráfica.</p>
    <!-- UPDATE task 3 -->
    
    <h3>Seguimiento de qué jugador se está utilizando</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
<code class="language-javascript" translate="No">// ### Set Boolean value for if ad is playing ###</code></pre>
    <p>Se supervisan varios eventos publicitarios y el valor booleano se establece en consecuencia.</p>
  </section>
  <!-- UPDATE CSS description -->
  
  <section class="bcls-section">
    <h2 id="Application_styling">Estilismo de aplicaciones</h2>
    <p>El único CSS establece el tamaño del reproductor.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Plugin_code">Código de plugin</h2>
    <p>Normalmente, al convertir JavaScript en un complemento de Brightcove Player, se necesitan cambios nominales. Un cambio necesario es reemplazar el uso estándar del <code translate="No">ready()</code> método por el código que define un complemento.</p>
    <p>Aquí está el código de inicio a JavaScript muy utilizado que funcionará con el reproductor:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.getPlayer('myPlayerID').ready(function() {
  var myPlayer = this;
  ...
});</code></pre>
    <p>Cambiarás la primera línea para usar la sintaxis estándar para iniciar un plugin de Brightcove Player:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.registerPlugin('pluginName', function(options) {
  var myPlayer = this;
  ...
});</code></pre>
    <!-- UPDATE path to plugin's JavaScript -->
    
    <p>Como se mencionó anteriormente, puede ver el código JavaScript del complemento en el repositorio de GitHub correspondiente de este documento: <a href="https://github.com/BrightcoveLearning/18352-scrolling-player-view-ads/blob/master/plugin/scroll-into-view-ads.js">scroll-into-view-ads.js</a>.</p>
    <h3>Uso del complemento con un reproductor</h3>
    <p>Una vez que tengas los archivos CSS y JavaScript del plugin almacenados en una ubicación accesible a Internet, puedes usar el plugin con un reproductor. En Studio's <strong>JUGADORES</strong> módulo puedes elegir un jugador, luego en el <strong>PLUGINS</strong> sección agregue las URL a los archivos CSS y JavaScript, y también agregue el <strong>Nombre</strong> y <strong>Opciones</strong> , si se necesitan opciones.</p>
    <aside class="bcls-aside bcls-aside--tip">Para obtener más información sobre el uso de Studio para asignar complementos a los reproductores, consulte la <a href="https://studio.support.brightcove.com/players/configuring-player-plugins.html">Configuración de complementos del reproductor</a> documento.</aside>
  </section>
</article>