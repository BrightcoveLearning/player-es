---
title: 'Muestra de Brightcove Player: Lista de reproducción de videos populares'
description: 'En este tema, aprenderá a utilizar la <a href="https://apis.support.brightcove.com/analytics/">API de análisis</a> y un Brightcove Player para mostrar una lista de reproducción de los videos más populares en la cuenta hoy. También vea el <a href="/code-samples/brightcove-player-sample-popular-videos-overlay.html">Superposición de vídeos populares</a> muestra.'
parent: Code Samples
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

  <aside class="bcls-aside bcls-aside--information">El contenido de este documento se aplica únicamente a Video Cloud.</aside>
  <section class="bcls-section">
    <h2 id="limitations">Limitaciones</h2>
    <aside class="bcls-aside bcls-aside--information">Este ejemplo y el código asociado se proporcionan como guía para el desarrollo de su producción. El código no está certificado para uso en producción ni se admite oficialmente.</aside>
  </section>
  <section class="bcls-section">
    <h2 id="Player_example">Ejemplo de jugador</h2>
    <!-- UPDATE description -->
    
    <p>La lista de reproducción aparecerá automáticamente tan pronto como se recuperen los datos del video. Se muestra la solicitud a la API de <span translate="No">Analytics</span> para obtener los 6 vídeos más vistos en las últimas 24 horas, junto con la respuesta de la API.</p>
    <!-- UPDATE codepen here -->
    
    <p data-height="711" data-theme-id="34967" data-slug-hash="ELWVXr" data-default-tab="result" data-user="bcls1969" data-embed-version="2" data-pen-title="18183-popular-videos-playlist" class="codepen">Ver la pluma <a href="https://codepen.io/team/bcls1969/pen/ELWVXr/">18183-lista-de-videos-populares</a> por Brightcove Learning Services (<a href="https://codepen.io/team/rcrooks1969"> bcls1969</a> ) en <a href="https://codepen.io">CodePen</a>.</p>
    <script async src="https://static.codepen.io/assets/embed/ei.js"></script><!-- UPDATE link to GitHub source -->
    
    <h3>Código fuente</h3>
          <p>Ver el <a href="https://github.com/BrightcoveLearning/18183-popular-videos-playlist">solución completa en GitHub</a>.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Overview">Resumen</h2>
    <p>Este ejemplo devuelve los videos más vistos durante el día anterior, desde su cuenta, utilizando la API de Analytics. Es similar al <a href="/code-samples/brightcove-player-sample-most-watched-videos-playlist.html">Lista de reproducción de videos más vistos</a> ejemplo, que utiliza el <a href="/references/player-catalog.html">Catálogo Brightcove Player</a> para acceder a la API de reproducción. Hay pocas diferencias que hay que tener en cuenta:</p>
    <h3>API de análisis</h3>
    <ul>
      <li>Si no especifica el <code translate="No">from</code> parámetro y el valor, el valor predeterminado es los últimos 30 días.</li>
      <li>Para recuperar los mismos resultados de la API de <span translate="No">Analytics</span> que obtendría de la API de reproducción, utilice el parámetro <code translate="No">?alltime</code> URL de la solicitud de API.</li>
    </ul>
    <h3>Catálogo de Brightcove Player (API de reproducción)</h3>
    <ul>
      <li>El <code translate="No">plays_total</code> campo es la visualización de vídeo de todos los tiempos de un vídeo.</li>
      <li>Puedes usar el <a href="/references/player-catalog.html#getSearch_method">catalog.getSearch ()</a> método para recuperar fácilmente datos de la API de reproducción.</li>
    </ul>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Using_the_CodePen">Uso de CodePen</h2></summary>
      <p>Estos son algunos consejos para utilizar eficazmente el CodePen anterior:</p>
      <ul>
        <li>Cambie la visualización real del reproductor haciendo clic en el <strong translate="No">Resultado</strong> botón.</li>
        <li>Haga clic en el <strong translate="No">HTML / CSS / JS</strong> botones para mostrar UNO de los tipos de código.</li>
        <li>Más adelante, en este documento, la lógica, el flujo y el estilo utilizados en la aplicación se analizarán en la configuración de <a href="#Player/HTML_configuration">reproductor/HTML</a>, Flujo de <a href="#Application_flow">aplicaciones</a> y Estilo de <a href="#Application_styling">la aplicación.</a> secciones. La mejor manera de seguir la información de estas secciones es:
          <ol>
            <li>Haga clic en el <strong translate="No">EDITAR CODEPEN</strong> en el CodePen y tenga el código disponible en un navegador / pestaña del navegador.</li>
            <li>En CodePen, ajusta el código que quieres que se muestre. Puede cambiar el ancho de las distintas secciones de código dentro de CodePen.</li>
            <li>Ver el <a href="#Player/HTML_configuration">Configuración de reproductor / HTML</a> , <a href="#Application_flow">Flujo de aplicación</a> y / o <a href="#Application_styling">Estilo de aplicación</a> secciones en otra pestaña del navegador / navegador. Ahora podrá seguir las explicaciones del código y, al mismo tiempo, ver el código.</li>
          </ol>
        </li>
      </ul>
    </details>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Development_sequence">secuencia de desarrollo</h2></summary> 
      <p>Esta es la secuencia de desarrollo recomendada:</p>
      <ol>
        <li>Utilice la implementación del reproductor de incrustación en la página para probar la funcionalidad de su reproductor, complemento y CSS (si es necesario CSS)</li>
        <li>Coloque el JavaScript y CSS del plugin en archivos separados para pruebas locales</li>
        <li>Implementa el código del plugin y CSS en tu servidor una vez que hayas resuelto cualquier error.</li>
        <li>Usa Studio para agregar el plugin y CSS a tu reproductor</li>
        <li>Reemplace la implementación del reproductor de incrustación en página si determina que la implementación de iframe se ajusta mejor (se detalla en la siguiente sección)</li>
      </ol>
      <p>Para obtener más información sobre estos pasos, consulte la sección <a href="/coding-topics/step-step-plugin-development.html">Paso a paso: </a> Guía de desarrollo de plugins.</p>
      <h3>iframe o incrustación en página</h3>
      <p>Al desarrollar mejoras para Brightcove Player, deberás decidir si el código se ajusta mejor a la implementación de iframe o incrustación en la página. La recomendación de práctica recomendada es crear un complemento para usarlo con una implementación de iframe. Las ventajas de utilizar el reproductor iframe son:</p>
      <ul>
        <li>Sin colisiones con JavaScript y/o CSS existentes</li>
        <li>Responde automáticamente</li>
        <li>El iframe facilita el uso en aplicaciones de redes sociales (o siempre que el vídeo tenga que «viajar» a otras aplicaciones)</li>
      </ul>
      <p>Aunque la integración del reproductor de incrustación en la página puede ser más compleja, hay ocasiones en que planificará el código en torno a esa implementación. Para generalizar, este enfoque es mejor cuando la página que contiene necesita comunicarse con el reproductor. En concreto, estos son algunos ejemplos:</p>
      <ul>
        <li>El código de la página que contiene necesita escuchar y actuar en función de los eventos de los jugadores</li>
        <li>El reproductor utiliza estilos de la página que lo contiene</li>
        <li>El iframe hará que la lógica de la aplicación falle, como un redireccionamiento desde la página que contiene</li>
      </ul>
      <p>Incluso si tu implementación final no utiliza el código iframe, puedes seguir usando el código de incrustación en la página con un plugin para tu JavaScript y un archivo separado para tu CSS. Esto encapsula tu lógica para que puedas utilizarla fácilmente en varios reproductores.</p>
    </details>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Getting_Credentials">Obtención de credenciales</h2></summary>
      <p>Para obtener un <code translate="No">client_id</code> y <code translate="No">client_secret</code>, tendrás que ir a la interfaz de usuario de OAuth y registrar esta aplicación:</p>
      <ul>
        <li><a href="https://studio.support.brightcove.com/admin/managing-api-authentication-credentials.html">Administración de credenciales de autenticación de API</a></li>
      </ul>
      <p>Estos son los permisos que necesitarás:</p>
      <figure class="bcls-figure"><img class="bcls-image" alt="Analytics API Permissions" src="/assets/images/code-samples/brightcove-player-sample-popular-videos-overlay/aapi-permissions.png" />
        <figcaption class="bcls-caption--image">Permisos API de Analytics</figcaption>
      </figure>
      <p>También puedes obtener tus credenciales a través de CURL o Postman. Consulta:</p>
      <ul>
        <li><a href="https://apis.support.brightcove.com/oauth/guides/oauth-create-client-credentials-using-curl.html">Obtener credenciales de cliente mediante CURL</a></li>
        <li><a href="https://apis.support.brightcove.com/oauth/guides/oauth-create-client-credentials-using-postman.html">Obtener credenciales de cliente mediante Postman</a></li>
      </ul>
      <p>Si obtienes credenciales directamente de la API, estos son los permisos que necesitas:</p>
      <pre class="line-numbers">
			<code class="language-json" translate="No">[
				"video-cloud/analytics/read",
				"video-cloud/video/read"
			]</code></pre>
    </details>
  </section>
  <section class="bcls-section">
    <h2 id="API/Plugin_resources_used">Recursos de API/plugins utilizados</h2>
    <!-- UPDATE table, remove unneeded columns -->
    
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>Métodos de Player API</th>
          <th>API REST</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td><a href="/references/player-catalog.html#getVideo">Catalog.getVideo ()</a></td>
          <td>Esta muestra utiliza el <a href="https://apis.support.brightcove.com/analytics/">API de análisis</a> a través de <a href="#proxy_code">proxy integrado en PHP</a>.</td>
        </tr>
        <tr>
          <td><a href="https://player.support.brightcove.com/references/guide-playlist-api.html#playlist">lista de reproducción ()</a></td>
          <td>&nbsp;</td>
        </tr>
      </tbody>
    </table>
  </section>
  <!-- UPDATE player and HTML configuration -->
  
  <section class="bcls-section">
    <h2 id="Player/HTML_configuration">Configuración de reproductor/HTML</h2>
    <p>En esta sección se detalla cualquier configuración especial necesaria durante la creación del reproductor. Además, se describen otros elementos HTML que deben agregarse a la página, más allá del código de implementación del reproductor de incrustación de la página.</p>
    <h3>Configuración del reproductor</h3>
    <p>No se requiere ninguna configuración especial para el reproductor de Brightcove que crea para este ejemplo.</p>
    <h3>Otros HTML</h3>
    <p>Al utilizar el reproductor Avanzado (inserción en la página), debe agregar un elemento HTML para especificar la ubicación de la lista de reproducción. Para obtener más detalles, consulte la <a href="/general/implementing-playlists.html#Advanced_in_page_embed_player">Implementación de listas de reproducción</a> documento.</p>
    <pre>
		<code class="language-html" translate="No">&lt;div class="vjs-playlist"&gt;&lt;/div&gt;</code></pre>
    <p>Recuerda añadir el <code translate="No">id</code> atributo a la <code translate="No">video</code> etiqueta en el código de inserción del reproductor.</p>
    <pre>
		<code class="language-html" translate="No">&lt;video-js <span class="bcls-highlight">id="myPlayerID"</span>
		...</code></pre>
    <p>Para fines de prueba, hemos agregado elementos HTML debajo del reproductor para mostrar el <span translate="No">API de análisis</span> solicitud y respuesta.</p>
    <pre class="line-numbers">
		<code class="language-html" translate="No">&lt;p&gt;
			&lt;strong&gt;Analytics API request:&lt;/strong&gt;
		&lt;/p&gt;
		&lt;pre id="apiRequest"&gt;&lt;/pre&gt;
		&lt;p&gt;
			&lt;strong&gt;Analytics Response data&lt;/strong&gt;
		&lt;/p&gt;
		&lt;pre id="responseData"&gt;&lt;/pre&gt;</code></pre>
  </section>
  <!-- UPDATE application flow -->
  
  <section class="bcls-section">
    <h2 id="Application_flow">Flujo de aplicaciones</h2>
    <p>La lógica básica detrás de esta aplicación es:</p>
    <ul>
      <li>Configurar el <span translate="No">API de análisis</span> solicitud</li>
      <li>Obtener datos de la API de Analytics</li>
      <li>Extraer los identificadores de vídeo</li>
      <li>Obtener los objetos de vídeo</li>
      <li>Cargar la lista de reproducción</li>
    </ul>
    <!-- UPDATE task 1 -->
    
    <h3>Configurar el <span translate="No">API de análisis</span> solicitud</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
		<code class="language-javascript" translate="No">// +++ Set up <span translate="No">Analytics API</span> request +++</code></pre>
    <p>Configure los parámetros de URL para <span translate="No">API de análisis</span> solicitud. Esta solicitud devolverá 6 videos de nuestra cuenta de Brightcove que tienen la mayor cantidad de vistas de video en las últimas 24 horas. Se ordenarán en orden descendente.</p>
    <!-- UPDATE task 2 -->
    
    <h3>Obtener datos de la API de Analytics</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
		<code class="language-javascript" translate="No">// +++ Get data from <span translate="No">Analytics API</span> +++</code></pre>
    <p>Este ejemplo llama a <a href="#proxy_code">proxy del lado del servidor</a> escrito en PHP para enviar su solicitud HTTP a la API de Analytics.</p>
    <!-- UPDATE task 3 -->
    
    <h3>Extraer los identificadores de vídeo</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
		<code class="language-javascript" translate="No">// +++ Extract the video ids +++</code></pre>
    <p>Extraiga los ID de video de los datos de respuesta de la API y guárdelos en una matriz.</p>
    <!-- UPDATE task 4 -->
    
    <h3>Obtener los objetos de vídeo</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
		<code class="language-javascript" translate="No">// +++ Get the video objects +++</code></pre>
    <p>Para cada ID de video devuelto por la API de Analytics, use el <code translate="No">catalog.getVideo()</code> método para obtener el objeto de video.</p>
    <!-- UPDATE task 5 -->
    
    <h3>Cargar la lista de reproducción</h3>
    <p>Busque el código etiquetado:</p>
    <pre>
		<code class="language-javascript" translate="No">// +++ Load the playlist +++</code></pre>
    <p>Usando la matriz de objetos de video, use el <code translate="No">playlist()</code> método para cargar los videos en la lista de reproducción del reproductor.</p>
  </section>
  <!-- UPDATE CSS description -->
  
  <section class="bcls-section">
    <h2 id="Application_styling">Estilismo de aplicaciones</h2>
    <p>CSS se utiliza para diseñar el reproductor y la lista de reproducción. Para propósitos de prueba, el <span translate="No">API de análisis</span> Los campos de solicitud y respuesta también se diseñan con CSS.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Plugin_code">Código de plugin</h2>
    <p>Normalmente, al convertir JavaScript en un complemento de Brightcove Player, se necesitan cambios nominales. Un cambio necesario es reemplazar el uso estándar del <code translate="No">ready()</code> método por el código que define un complemento.</p>
    <p>Aquí está el código de inicio a JavaScript muy utilizado que funcionará con el reproductor:</p>
    <pre class="line-numbers">
		<code class="language-javascript" translate="No">videojs.getPlayer('myPlayerID').ready(function() {
			var myPlayer = this;
			...
		});</code></pre>
    <p>Cambiarás la primera línea para usar la sintaxis estándar para iniciar un plugin de Brightcove Player:</p>
    <pre class="line-numbers">
		<code class="language-javascript" translate="No">videojs.registerPlugin('pluginName', function(options) {
			var myPlayer = this;
			...
		});</code></pre>
    <!-- UPDATE path to plugin's JavaScript -->
    
    <p>Como se mencionó anteriormente, puede ver el código JavaScript del complemento en el repositorio de GitHub correspondiente de este documento: <a href="https://github.com/BrightcoveLearning/18183-popular-videos-playlist/blob/master/plugin/popular-videos.js">popular-videos.js</a>.</p>
    <h3>Uso del complemento con un reproductor</h3>
    <p>Una vez que tengas los archivos CSS y JavaScript del plugin almacenados en una ubicación accesible a Internet, puedes usar el plugin con un reproductor. En Studio's <strong>JUGADORES</strong> módulo puedes elegir un jugador, luego en el <strong>PLUGINS</strong> sección agregue las URL a los archivos CSS y JavaScript, y también agregue el <strong>Nombre</strong> y <strong>Opciones</strong> , si se necesitan opciones.</p>
    <aside class="bcls-aside bcls-aside--tip">Para obtener más información sobre el uso de Studio para asignar complementos a los reproductores, consulte la <a href="https://studio.support.brightcove.com/players/configuring-player-plugins.html">Configuración de complementos del reproductor</a> documento.</aside>
  </section>
  <section class="bcls-section">
    <h2 id="proxy_code">Código proxy</h2>
    <p>Para crear su propia versión de la aplicación de muestra en esta página, debe crear y alojar su propio proxy. (Los proxies utilizados por Brightcove Learning Services solo aceptan solicitudes de dominios de Brightcove.) Un proxy de ejemplo, muy similar al que usamos, pero sin las comprobaciones que bloquean solicitudes de dominios que no son de BrightCove, se puede encontrar en <a href="https://github.com/BrightcoveLearning/sample-proxy-apps">este repositorio de GitHub</a>. También encontrará instrucciones básicas para utilizarlo allí y una guía más elaborada para crear aplicaciones alrededor del proxy en <a href="/getting-started/learning-guide-using-rest-apis.html">Uso de las API REST</a>.</p>
  </section>
</article>