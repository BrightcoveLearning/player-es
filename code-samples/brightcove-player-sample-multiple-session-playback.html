---
title: 'Muestra de Brightcove Player: Reproducción de múltiples sesiones'
description: 'En este tema, aprenderá a utilizar el nuevo Brightcove Player para actualizar una cookie de sesión durante la reproducción para mantener la posición actual.'
parent: Code Samples
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

      <aside class="bcls-aside bcls-aside--warning">En este ejemplo se agrega y actualiza una cookie en el navegador web del usuario. Esto puede ser una posible preocupación de privacidad en determinadas áreas geográficas.</aside>
    <section class="bcls-section">
        <h2 id="Player_example">Ejemplo de jugador</h2>
        <!-- UPDATE description -->

        <aside class="bcls-aside bcls-aside--information">Este ejemplo y el código asociado se proporcionan como guía para el desarrollo de su producción. El código no está certificado para uso en producción ni se admite oficialmente.</aside>
        <p>Cuando el reproductor se carga inicialmente, se verificará una cookie para la última posición vista del video. Si la cookie está presente, el video comenzará a reproducirse en ese momento. Cuando el video termine de reproducirse, la cookie se establecerá en cero.</p>
        <p>Reproduzca el video y deténgalo en algún momento durante la reproducción. Cuando actualice la página, el video se reanudará donde lo dejó.</p>
        <!-- UPDATE codepen here -->

        <p data-height="555" data-theme-id="34967" data-slug-hash="LmNJda" data-default-tab="result" data-user="bcls1969" data-embed-version="2" data-pen-title="Multiple Session Playback" class="codepen">Ver la pluma <a href="https://codepen.io/team/bcls1969/pen/LmNJda/">Reproducción de múltiples sesiones</a> por Brightcove Learning Services (<a href="https://codepen.io/team/rcrooks1969"> bcls1969</a> ) en <a href="https://codepen.io">CodePen</a>.</p>
        <script async src="https://static.codepen.io/assets/embed/ei.js"></script><!-- UPDATE link to GitHub source -->

        <h3>Código fuente</h3>
          <p>Ver el <a href="https://github.com/BrightcoveLearning/18198-multiple-session-playback">solución completa en GitHub</a>.</p>

        <aside class="bcls-aside bcls-aside--information">El CodePen anterior funcionará en navegadores que permiten a iframes configurar cookies. Para probar el ejemplo en navegadores que tampoco permiten configurar cookies desde un iframe:
            <ul>
                <li>Ver la muestra <a href="https:/code-samples/sample-pages/multi-session-playback.html">aquí</a> donde el código no está en un iframe</li>
                <li>Edita el CodePen (te verás obligado a bifurcarlo) y cambia a la vista de depuración de <a href="https://blog.codepen.io/documentation/views/debug-view/">Codepen</a></li>
                <li>Copia el código en tu propia página web</li>
            </ul>
            <p>Nota: <strong>Safari 13+</strong> NO permite configurar cookies desde un iframe. De forma predeterminada, Safari ahora descarta las cookies configuradas en un iframe. </p>
        </aside>
    </section>
    <section class="bcls-section">
    <details>
      <summary><h2 id="Using_the_CodePen">Uso de CodePen</h2></summary>
      <p>Estos son algunos consejos para utilizar eficazmente el CodePen anterior:</p>
      <ul>
        <li>Cambie la visualización real del reproductor haciendo clic en el <strong translate="No">Resultado</strong> botón.</li>
        <li>Haga clic en el <strong translate="No">HTML / CSS / JS</strong> botones para mostrar UNO de los tipos de código.</li>
        <li>Más adelante, en este documento, la lógica, el flujo y el estilo utilizados en la aplicación se analizarán en la configuración de <a href="#Player/HTML_configuration">reproductor/HTML</a>, Flujo de <a href="#Application_flow">aplicaciones</a> y Estilo de <a href="#Application_styling">la aplicación.</a> secciones. La mejor manera de seguir la información de estas secciones es:
          <ol>
            <li>Haga clic en el <strong translate="No">EDITAR CODEPEN</strong> en el CodePen y tenga el código disponible en un navegador / pestaña del navegador.</li>
            <li>En CodePen, ajusta el código que quieres que se muestre. Puede cambiar el ancho de las distintas secciones de código dentro de CodePen.</li>
            <li>Ver el <a href="#Player/HTML_configuration">Configuración de reproductor / HTML</a> , <a href="#Application_flow">Flujo de aplicación</a> y / o <a href="#Application_styling">Estilo de aplicación</a> secciones en otra pestaña del navegador / navegador. Ahora podrá seguir las explicaciones del código y, al mismo tiempo, ver el código.</li>
          </ol>
        </li>
      </ul>
    </details>
  </section>
  <section class="bcls-section">
    <details>
      <summary><h2 id="Development_sequence">secuencia de desarrollo</h2></summary> 
      <p>Esta es la secuencia de desarrollo recomendada:</p>
      <ol>
        <li>Utilice la implementación del reproductor de incrustación en la página para probar la funcionalidad de su reproductor, complemento y CSS (si es necesario CSS)</li>
        <li>Coloque el JavaScript y CSS del plugin en archivos separados para pruebas locales</li>
        <li>Implementa el código del plugin y CSS en tu servidor una vez que hayas resuelto cualquier error.</li>
        <li>Usa Studio para agregar el plugin y CSS a tu reproductor</li>
        <li>Reemplace la implementación del reproductor de incrustación en página si determina que la implementación de iframe se ajusta mejor (se detalla en la siguiente sección)</li>
      </ol>
      <p>Para obtener más información sobre estos pasos, consulte la sección <a href="/coding-topics/step-step-plugin-development.html">Paso a paso: </a> Guía de desarrollo de plugins.</p>
      <h3>iframe o incrustación en página</h3>
      <p>Al desarrollar mejoras para Brightcove Player, deberás decidir si el código se ajusta mejor a la implementación de iframe o incrustación en la página. La recomendación de práctica recomendada es crear un complemento para usarlo con una implementación de iframe. Las ventajas de utilizar el reproductor iframe son:</p>
      <ul>
        <li>Sin colisiones con JavaScript y/o CSS existentes</li>
        <li>Responde automáticamente</li>
        <li>El iframe facilita el uso en aplicaciones de redes sociales (o siempre que el vídeo tenga que «viajar» a otras aplicaciones)</li>
      </ul>
      <p>Aunque la integración del reproductor de incrustación en la página puede ser más compleja, hay ocasiones en que planificará el código en torno a esa implementación. Para generalizar, este enfoque es mejor cuando la página que contiene necesita comunicarse con el reproductor. En concreto, estos son algunos ejemplos:</p>
      <ul>
        <li>El código de la página que contiene necesita escuchar y actuar en función de los eventos de los jugadores</li>
        <li>El reproductor utiliza estilos de la página que lo contiene</li>
        <li>El iframe hará que la lógica de la aplicación falle, como un redireccionamiento desde la página que contiene</li>
      </ul>
      <p>Incluso si tu implementación final no utiliza el código iframe, puedes seguir usando el código de incrustación en la página con un plugin para tu JavaScript y un archivo separado para tu CSS. Esto encapsula tu lógica para que puedas utilizarla fácilmente en varios reproductores.</p>
    </details>
  </section>
    <section class="bcls-section">
        <h2 id="API/Plugin_resources_used">Recursos de API/plugins utilizados</h2>
        <!-- UPDATE table, remove unneeded columns -->

        <table class="bcls-table">
            <thead class="bcls-table__head">
                <tr>
                    <th>Métodos de Player API</th>
                    <th>Eventos de Player API</th>
                </tr>
            </thead>
            <tbody class="bcls-table__body">
                <tr>
                    <td><a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#ready">ready ()</a></td>
                    <td><a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#event:loadeddata">datos cargados</a></td>
                </tr>
                <tr>
                    <td><a href="https://docs.brightcove.com/brightcove-player/current-release/module-events.html#.on">on ()</a></td>
                    <td><a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#event:timeupdate">actualización de tiempo</a></td>
                </tr>
                <tr>
                    <td><a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#currentTime">Hora actual ()</a></td>
                    <td><a href="https://docs.brightcove.com/brightcove-player/current-release/Player.html#event:play">jugar</a></td>
                </tr>
            </tbody>
        </table>
    </section>
    <!-- UPDATE player and HTML configuration -->

    <section class="bcls-section">
        <h2 id="Player/HTML_configuration">Configuración de reproductor/HTML</h2>
        <p>En esta sección se detalla cualquier configuración especial necesaria durante la creación del reproductor. Además, se describen otros elementos HTML que deben agregarse a la página, más allá del código de implementación del reproductor de incrustación de la página.</p>
        <h3>Configuración del reproductor</h3>
        <p>No se requiere ninguna configuración especial para el reproductor de Brightcove que crea para este ejemplo.</p>
        <h3>Otros HTML</h3>
        <p>Recuerda añadir el <code translate="No">id</code> atributo a la <code translate="No">video-js</code> etiqueta en el código de inserción del reproductor.</p>
        <pre>
<code class="language-html" translate="No">&lt;video-js <span class="bcls-highlight">id="myPlayerID"</span>
...</code></pre>
        <p>Con fines de prueba, hemos agregado dos elementos HTML debajo del reproductor para mostrar el valor inicial de la cookie de sesión y el valor actual de la cookie a medida que se reproduce el video.</p>
        <pre class="line-numbers">
<code class="language-html" translate="No">&lt;p&gt;video start cookie value = &lt;span id="cookieDisplay1"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;current cookie value = &lt;span id="cookieDisplay2"&gt;&lt;/span&gt;&lt;/p&gt;</code></pre>
    </section>
    <!-- UPDATE application flow -->

    <section class="bcls-section">
        <h2 id="Application_flow">Flujo de aplicaciones</h2>
        <p>La lógica básica detrás de esta aplicación es:</p>
        <ul>
            <li>Lea la cookie del navegador.</li>
            <li>Verifique el valor de la cookie.</li>
            <li>Inicia la reproducción de vídeo.</li>
            <li>Incrementar la cookie.</li>
            <li>Restablecer la cookie.</li>
        </ul>
        <!-- UPDATE task 1 -->

        <h3>Lea la cookie del navegador</h3>
        <p>Busque el código etiquetado:</p>
        <pre>
<code class="language-javascript" translate="No">// +++ Read browser cookie +++</code></pre>
        <p>Inicialice las variables y lea la cookie del navegador asociada con la posición del video de Brightcove. La cookie se llama <code translate="No">BC_position</code>.</p>
        <!-- UPDATE task 2 -->

        <h3>Verifique el valor de la cookie</h3>
        <p>Busque el código etiquetado:</p>
        <pre>
<code class="language-javascript" translate="No">// +++ Check the cookie value +++</code></pre>
        <p>Si la cookie existe, establezca la posición de inicio del video en este valor. De lo contrario, comience desde el principio del video.</p>
        <!-- UPDATE task 3 -->

        <h3>Iniciar la reproducción de video</h3>
        <p>Busque el código etiquetado:</p>
        <pre>
<code class="language-javascript" translate="No">// +++ Start video playback +++</code></pre>
        <p>Si la posición del video es mayor que cero, comience la reproducción en ese punto. De lo contrario, permita que el usuario inicie la reproducción de video desde el principio.</p>
        <!-- UPDATE task 4 -->

        <h3>Incrementar la cookie</h3>
        <p>Busque el código etiquetado:</p>
        <pre>
<code class="language-javascript" translate="No">// +++ Increment the cookie +++</code></pre>
        <p>Escuche cuando haya cambiado la posición de reproducción actual. Esto debería ser cada 15-250 milisegundos. Cuando cambie el valor entero de la posición de reproducción actual, actualice la cookie.</p>
        <!-- UPDATE task 5 -->

        <h3>Restablecer la cookie</h3>
        <p>Busque el código etiquetado:</p>
        <pre>
<code class="language-javascript" translate="No">// +++ Reset the cookie +++</code></pre>
        <p>Cuando la reproducción de video llegue al final, restablezca el valor de la cookie a cero.</p>
    </section>
    <!-- UPDATE CSS description -->

    <section class="bcls-section">
        <h2 id="Application_styling">Estilismo de aplicaciones</h2>
        <p>No hay estilos adicionales para este ejemplo.</p>
    </section>
    <section class="bcls-section">
        <h2 id="Plugin_code">Código de plugin</h2>
        <p>Normalmente, al convertir JavaScript en un complemento de Brightcove Player, se necesitan cambios nominales. Un cambio necesario es reemplazar el uso estándar del <code translate="No">ready()</code> método por el código que define un complemento.</p>
        <p>Aquí está el código de inicio a JavaScript muy utilizado que funcionará con el reproductor:</p>
        <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.getPlayer('myPlayerID').ready(function() {
  var myPlayer = this;
  ...
});</code></pre>
        <p>Cambiarás la primera línea para usar la sintaxis estándar para iniciar un plugin de Brightcove Player:</p>
        <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.registerPlugin('pluginName', function(options) {
  var myPlayer = this;
  ...
});</code></pre>
        <!-- UPDATE path to plugin's JavaScript -->

        <p>Como se mencionó anteriormente, puede ver el código JavaScript del complemento en el repositorio de GitHub correspondiente de este documento: <a href="https://github.com/BrightcoveLearning/18198-multiple-session-playback/blob/master/plugin/multiple-session.js">multiple-session.js</a>.</p>
        <h3>Uso del complemento con un reproductor</h3>
        <p>Una vez que tengas los archivos CSS y JavaScript del plugin almacenados en una ubicación accesible a Internet, puedes usar el plugin con un reproductor. En Studio's <strong>JUGADORES</strong> módulo puedes elegir un jugador, luego en el <strong>PLUGINS</strong> sección agregue las URL a los archivos CSS y JavaScript, y también agregue el <strong>Nombre</strong> y <strong>Opciones</strong> , si se necesitan opciones.</p>
        <aside class="bcls-aside bcls-aside--tip">Para obtener más información sobre el uso de Studio para asignar complementos a los reproductores, consulte la <a href="https://studio.support.brightcove.com/players/configuring-player-plugins.html">Configuración de complementos del reproductor</a> documento.</aside>
    </section>
</article>