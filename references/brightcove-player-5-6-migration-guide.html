---
title: Guía de migración de Brightcove Player 5 a 6
parent: References
---

<article class="bcls-article">
  <h1>Guía de migración de Brightcove Player 5 a 6</h1>
  <summary>En este tema, aprenderá acerca de los problemas al migrar de Brightcove Player versión 5 a la versión 6.</summary>
  <section class="bcls-section">
    <h2 id="Overview">Resumen</h2>
    <p >Si bien los cambios incompatibles con versiones anteriores en Video.js 6 están documentados en el <a href="//github.com/videojs/video.js/wiki/Video.js-6-Migration-Guide">Wiki de Video.js</a> , este documento se puede utilizar para obtener pautas de migración adicionales específicas para Brightcove Player 6 que no se aplican a la migración de Video.js 5 a 6.</p>
    <p >Una parte importante de Brightcove Player 5 fue el complemento de compatibilidad, activado por el valor de configuración del reproductor:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">"compatibility": true</code></pre>
    <p >Esta configuración está activada de forma predeterminada para los reproductores 5.x. Su efecto es incluir un complemento que "calzará" la API de Video.js 4, lo que permitió que más complementos e integraciones de clientes funcionaran sin problemas en la actualización automática de Brightcove Player 5.</p>
    <p >A partir de Brightcove Player 6, esta calza ya no forma parte del reproductor. Cualquiera que desee actualizar de 5 a 6 debe asegurarse de que su código sea compatible con la API de Video.js 6 siguiendo la documentación mencionada anteriormente en el <a href="//github.com/videojs/video.js/wiki/Video.js-6-Migration-Guide">Wiki de Video.js</a>. Las siguientes secciones documentan los cambios que deberá tener en cuenta al realizar la actualización.</p>
  </section>
  <section class="bcls-section">
    <h2 id="player-tech">player.tech</h2>
    <p >En la versión 6 de Brightcove Player, <code translate="No">player.tech</code> es una función que devuelve la tecnología de reproducción actual, no una propiedad del reproductor como en la versión 5. El calce asignó algunas propiedades del objeto tecnológico a la función tecnológica, por lo que el código esperaba <code translate="No">player.tech</code> ser el objeto tecnológico no arrojaría errores.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Player_sizing">Dimensionamiento de los jugadores</h2>
    <p >En Video.js 4, el tamaño del reproductor se realizó mediante JavaScript. Video.js 5 introdujo un nuevo esquema de tamaño basado en CSS que causó algunos problemas con las dimensiones del reproductor. La cuña hizo retroceder estos cambios, de modo que se comportaron más como lo hicieron en la versión 4.</p>
    <p >En la práctica, cuando se utiliza Brightcove Player v6, <code translate="No">height</code> y <code translate="No">width</code> en la etiqueta de video se miden en píxeles <strong>solo</strong>. De hecho, no ingresa ninguna unidad para el <code translate="No">height</code> y <code translate="No">width</code> atributos:</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">width="480"</code></pre>
    <p >Puede establecer el ancho y la altura en <strong>100%</strong> en la versión 5, esto ya no funciona en la versión 6. Puede lograr esto usando CSS de dos formas diferentes:</p>
    <ul>
      <li>Uso de un <code translate="No">style</code> atributo de la <code translate="No">video</code> etiqueta.
        <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js data-video-id="5622718636001"
  data-account="1507807800001"
  data-player="default"
  data-embed="default"
  data-application-id
  class="video-js"
  controls
  <span class="bcls-highlight">style="width: 100%;height: 100%"</span>&gt;&lt;/video-js&gt;
&lt;script src="https://players.brightcove.net/1507807800001/default_default/index.min.js"&gt;&lt;/script&gt;</code></pre>
      </li>
      <li>Usar una <code translate="No">style</code> etiqueta.
        <pre class="line-numbers">
  <code class="language-html" translate="No">...
  <span class="bcls-highlight">&lt;style&gt;
      .video-js {
        height: 100%;
        width: 100%;
      }
  &lt;/style&gt;</span>
  ...
  &lt;video-js data-account="1752604059001"
    data-player="H1xW7NWcz"
    data-embed="default"
    data-application-id
    class="video-js"
    controls&gt;&lt;/video-js&gt;
  &lt;script src="https://players.brightcove.net/1752604059001/H1xW7NWcz_default/index.min.js"&gt;&lt;/script&gt;</code></pre>
      </li>
    </ul>
    <aside class="bcls-aside bcls-aside--tip">Si utilizas solo porcentajes y el jugador no está en un contenedor que tenga una altura establecida, es posible que no veas al jugador porque la altura es cero. Asegúrese de que el contenedor principal del jugador tenga una altura establecida.</aside>
  </section>
  <section class="bcls-section">
    <h2 id="Component_constructors">Constructores de componentes</h2>
    <p >En Video.js 4 y la versión 5 a través de la corrección, los constructores de componentes (como <code translate="No">Player</code> y <code translate="No">ControlBar</code> ) estaban disponibles como propiedades del <code translate="No">videojs</code> función:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No"> videojs.${ComponentName}</code></pre>
    <p >Este ya no es el caso. La <code translate="No">videojs.getComponent</code> la función debe usarse en su lugar:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">var ControlBar = videojs.getComponent('ControlBar');</code></pre>
  </section>
  <section class="bcls-section">
    <h2 id="SliderHandle_component">Componente SliderHandle</h2>
    <p >Este componente no estaba en el reproductor 5.x, pero se restauró a través de la corrección para aquellos usuarios que lo estaban extendiendo. Ahora se elimina por completo.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Properties/Methods_and_alternatives">Propiedades / Métodos y alternativas</h2>
    <p >Las siguientes son algunas de las propiedades de Video.js de 4.x que fueron copiadas a 5.x por la corrección de compatibilidad. Ya no están presentes en 6.x, pero se proporcionan alternativas:</p>
    <table class="bcls-table">
      <thead class="bcls-table__head">
        <tr>
          <th>Remoto</th>
          <th>Alternativa</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td>vjs</td>
          <td>vídeos</td>
        </tr>
        <tr>
          <td>videojs.JSON</td>
          <td>JSON</td>
        </tr>
        <tr>
          <td>videojs.USER_AGENT</td>
          <td>window.navigator.userAgent</td>
        </tr>
        <tr>
          <td>videojs.EventEmitter</td>
          <td>Vídeo JS.Event Target</td>
        </tr>
        <tr>
          <td>videojs.obj.isArray</td>
          <td>Array.isArray</td>
        </tr>
        <tr>
          <td>videojs.round (num, dígitos)</td>
          <td>Número (num. A fijo (dígitos))</td>
        </tr>
        <tr>
          <td>videojs.trim (str)</td>
          <td>str.trim ()</td>
        </tr>
        <tr>
          <td>videojs.util.mergeOptions</td>
          <td>videojs.mergeOptions</td>
        </tr>
      </tbody>
    </table>
  </section>
  <section class="bcls-section">
    <h2 id="Creating_a_custom_plugin">Creando un complemento personalizado</h2>
    <p >En la versión 5 de Brightcove Player, cuando creó un complemento personalizado, la primera línea del complemento usaba el <code translate="No">videojs.plugin()</code> método. Por ejemplo:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.plugin('scrollIntoView', function() {
  var myPlayer = this,
    isAdPlaying = false;
  ...</code></pre>
    <p >Ahora deberías usar el <code translate="No">videojs.registerPlugin()</code> método en su lugar. Por ejemplo:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.registerPlugin('scrollIntoView', function() {
  var myPlayer = this,
    isAdPlaying = false;</code></pre>
    <p >Aunque <code translate="No">videojs.plugin()</code> está en desuso en la versión 6, si se usa no generará errores, pero verá una advertencia en la consola. No se puede utilizar <code translate="No">videojs.registerPlugin()</code> con jugadores de la versión 5.</p>
    <aside class="bcls-aside bcls-aside--tip">Si encuentra que necesita usar un complemento con ambas versiones del reproductor, puede usar esta técnica para proporcionar compatibilidad cruzada de Video.js 5/6:
      <pre class="line-numbers">
<code class="language-javascript" translate="No">var registerPlugin =   videojs.registerPlugin || videojs.plugin;
registerPlugin('pluginName', function(){
  ...
});</code></pre>
    </aside>
  </section>
  <section class="bcls-section">
    <h2 id="IMA3_plugin">Complemento IMA3</h2>
    <p>Después de actualizar a Brightcove Player 6, deberá reinstalar manualmente el complemento IMA3 mediante Studio. Consulte el <a href="/advertising/step-step-implementing-advertising.html">paso a paso: Implementación de publicidad</a> documento para obtener más detalles.</p>
    <p>Si se siente cómodo usando el <a href="https://apis.support.brightcove.com/player-management/">API de gestión de jugadores</a> , también puede actualizar el complemento IMA3 usando curl. Específicamente, aquí está la referencia de API a <a href="https://apis.support.brightcove.com/player-management/references/reference.html#operation/UpdatePlayer">Actualizar un jugador</a>. Tenga en cuenta que esto se puede hacer en el mismo&nbsp;Llamada a la API de administración de jugadores que utiliza para actualizar realmente el reproductor.</p>
  </section>
  <section class="bcls-section">
    <h2 id="Flash_HLS_and_crossdomain.xml">Flash HLS y crossdomain.xml</h2>
    <p >En algunos casos especiales, cuando utilice una versión de Brightcove Player 6.13.0 y posterior, deberá utilizar un <strong>crossdomain.xml</strong> expediente. Esto será necesario cuando:</p>
    <ul>
      <li>Está utilizando sus propios CDN.</li>
      <li>Está utilizando Brightcove Player de tal forma que debe utilizar Flash. Ver el <a href="/playback/determining-which-rendition-will-play.html">Determinar qué interpretación se reproducirá</a> documento para cuando esto pueda ocurrir.</li>
    </ul>
    <p >Si se cumplen estos criterios, deberá utilizar un <strong>crossdomain.xml</strong> archivo en el dominio raíz desde donde se sirven los medios. Por ejemplo, si está sirviendo contenido de</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">https://www.domain.com/media/video.m3u8</code></pre>
    <p >Entonces un <strong>crossdomain.xml</strong> el archivo debe existir en</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">https://www.domain.com/crossdomain.xml</code></pre>
    <p >Dado que el reproductor swf está alojado en <code translate="No">players.brightcove.net</code> , se recomienda utilizar <code translate="No">*.brightcove.net</code>. Un ejemplo <strong>crossdomain.xml</strong> aparece de la siguiente manera:</p>
    <pre class="line-numbers">
<code class="language-xml" translate="No">&lt;?xml version="1.0"?&gt;
&lt;cross-domain-policy&gt;
&lt;allow-access-from domain="*.brightcove.net" /&gt;
&lt;/cross-domain-policy&gt;</code></pre>
    <p >Deberá proporcionar los dominios adecuados. Para obtener más detalles, consulte <a href="https://code.tutsplus.com/tutorials/quick-tip-a-guide-to-cross-domain-policy-files--active-3832">Consejo rapido: Una guía para los archivos de políticas entre dominios</a>.</p>
    <h3>Trabajando con HTTPS</h3>
    <p >Cuando carga un activo HTTPS desde una página HTTP o viceversa, debe incluir el <code translate="No">secure</code> atributo con un valor de <code translate="No">false</code> como sigue:</p>
    <pre class="line-numbers">
<code class="language-xml" translate="No">&lt;?xml version="1.0"?&gt;
&lt;cross-domain-policy&gt;
&lt;allow-access-from domain="*.brightcove.net" secure="false"/&gt;
&lt;/cross-domain-policy&gt;</code></pre>
  </section>
</article>