---
title: "Protección de clave / licencia con Brightcove Player"
description: "En este tema, aprenderá a configurar Brightcove Player para utilizar la protección de clave / licencia asociada con las restricciones de reproducción de Brightcove."
parent: Playback
layout: staging
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>
  
  <br/>
  <aside class="bcls-aside bcls-aside--tip">Esta función está disponible para un conjunto específico de clientes con acceso a la fase de disponibilidad limitada de las restricciones de reproducción de Brightcove.</aside>
  
  <section class="bcls-section">
    <h2 id="Introduction">Introducción</h2>

    <p>La protección de clave / licencia ofrece un nivel adicional de seguridad cuando se usa Dynamic Delivery con contenido protegido por DRM o HTTP Live Streaming Encryption (HLSe). Las solicitudes de licencia se pueden autenticar mediante un token web <a href="https://general.support.brightcove.com/developer/create-json-web-token.html">JSON (JWT) firmado</a>. El token se utiliza al solicitar la licencia de vídeo, una vez que el vídeo se ha cargado en el reproductor y se ha seleccionado la fuente.</p>
    <p>Si no está familiarizado con esta función, consulte la <a href="https://apis.support.brightcove.com/playback-restrictions/getting-started/overview-playback-restrictions.html">descripción general: </a> Documento de restricciones de reproducción de Brightcove.</p>
  </section>

  <section class="bcls-section">
    <h2 id="Overview">Resumen</h2>
    <p>Para configurar Brightcove Player para la protección de clave / licencia, pasará un parámetro de token al realizar la solicitud de catálogo del video. Para ayudarle a comprender el código de la siguiente sección, revise los conceptos de los siguientes documentos:</p>
    <ul>
      <li><a href="https://general.support.brightcove.com/developer/create-json-web-token.html">Creación de un token web <span translate="No">JSON</span> (JWT)</a></li>
      <li><a href="https://support.brightcove.com/concepts-using-javascript-promises">Conceptos: Uso de promesas JavaScript</a></li>
      <li><a href="https://support.brightcove.com/player-catalog#Catalog_parameters_object">Parámetros de catálogo</a></li>
      <li><a href="https://support.brightcove.com/configuring-brightcove-player-drm">Configuración de Brightcove Player para DRM</a></li>
    </ul>
  </section>

  <section class="bcls-section">
    <h2 id="Using_an_auth_token">Usando un token de autenticación</h2>
    <p>Para usar la protección de clave / licencia, pase un token de cadena como parte del <a href="https://player.support.brightcove.com/references/player-catalog.html">catálogo de jugadores</a> objeto, usando el nombre de la propiedad <code translate="No">bcovAuthToken</code>.</p>
    <p>Este enfoque funciona tanto para contenido DRM como HLSE. El reproductor detectará el tipo de fuente que se está cargando desde la API de reproducción y proporcionará la implementación correcta para ese origen.</p>
    <aside class="bcls-aside bcls-aside--information">Esta implementación requiere la versión Player <strong>6.33.0</strong> o después. Si usa DRM, necesitará el <a href="https://support.brightcove.com/configuring-brightcove-player-drm#Changelog">Complemento DRM</a> versión <strong>5.5.0</strong> o después.</aside>

    <h3>Pasos</h3>
    <ol class="bcls-tasklist">
      <li>Cree un token web <a href="https://general.support.brightcove.com/developer/create-json-web-token.html">JSON (JWT) firmado</a>.</li>
      <li>
        <p>Incluye este token en la solicitud de vídeo.</p>
        <p>Este código de implementación de muestra utiliza el <a href="https://player.support.brightcove.com/references/player-catalog.html#get_method">catalog.get ()</a> método para solicitar el video mientras se proporciona el token.</p>
    <aside class="bcls-aside bcls-aside--information">Asegúrese de NO incluir el <code translate="No">data-video-id</code> parámetro en la <code translate="No">&lt;video-js&gt;</code> etiqueta.</aside>
<pre class="line-numbers">
  <code class="language-html" translate="No">&lt;video-js id=&quot;myPlayerID&quot;
    data-account=&quot;1507807800001&quot;
    data-player=&quot;default&quot;
    data-embed=&quot;default&quot;
    controls
    data-application-id&gt;&lt;/video-js&gt;
  &lt;script src=&quot;//players.brightcove.net/1507807800001/default_default/index.min.js&quot;&gt;&lt;/script&gt;
  
  &lt;script&gt;
    (function() {
      var myPlayer = videojs.getPlayer('myPlayerID');
  
      myPlayer.catalog.get({
        type: 'video',
        id: '6015247091001',
        <span class="bcls-highlight">bcovAuthToken:</span> '<span class="bcls-input">your jwt token</span>'
      })
        .then(function(videoReturned){
          myPlayer.catalog.load(videoReturned);
        })
        .catch(function(err){
          console.log('err:', err);
        });
    })();
  &lt;/script&gt;</code></pre>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="configuring_server_side_ads_SSAI">Configuración de anuncios del lado del servidor (SSAI)</h2>
    <p>Si está utilizando la protección de clave / licencia con SSAI, debe incluir un parámetro adicional al objeto de parámetros del catálogo, llamado <code translate="No">adConfigId</code>. </p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id=&quot;myPlayerID&quot;
  data-account=&quot;1507807800001&quot;
  data-player=&quot;default&quot;
  data-embed=&quot;default&quot;
  controls
  data-application-id&gt;&lt;/video-js&gt;
&lt;script src=&quot;//players.brightcove.net/1507807800001/default_default/index.min.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
  (function() {
    var myPlayer = videojs.getPlayer('myPlayerID');

    myPlayer.catalog.get({
      type: 'video',
      id: '6015247091001',
      bcovAuthToken: '<span class="bcls-input">your jwt token</span>',
      <span class="bcls-highlight">adConfigId:</span> '<span class="bcls-input">your ad configuration id</span>'
    })
      .then(function(videoReturned){
        myPlayer.catalog.load(videoReturned);
      })
      .catch(function(err){
        console.log('err:', err);
      });
  })();
&lt;/script&gt;</code></pre>
  </section>

  <section class="bcls-section">
    <h2 id="Using_a_custom_implementation">Uso de una implementación personalizada</h2>
    <p>Es posible que esté utilizando una implementación personalizada donde no tiene la <code translate="No">bcovAuthToken</code> para establecer el valor con el <a href="https://support.brightcove.com/player-catalog#get_method">catalog.get ()</a> solicitud de método. Si utiliza su propio reproductor o un reproductor de terceros, puede utilizar uno de los siguientes métodos para pasar su token a la solicitud de licencia:</p>
    <ul>
      <li>
        Encabezado HTTP: <code translate="No">BCOV-Auth</code>(No compatible con HLSE)
      </li>
      <li>
        Cookie: <code translate="No">bcov-auth</code>(No compatible con HLSE)
      </li>
      <li>
        Parámetro de consulta: <code translate="No">bcov-auth</code>(Solo compatible con HLSE) Debe añadirse a la url del manifiesto principal, en lugar de a la url de la licencia
      </li>
    </ul>
    <p>
      A continuación se muestra un ejemplo que muestra cómo establecer el <code translate="No">source.emeHeaders['BCOV-Auth']</code> atributo del objeto de vídeo en el token. Esto inserta el <code translate="No">emeHeader</code> en cada fuente DESPUÉS de la solicitud de catálogo.
    </p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id=&quot;myPlayerID&quot;
  data-account=&quot;1507807800001&quot;
  data-player=&quot;default&quot;
  data-embed=&quot;default&quot;
  controls
  data-application-id&gt;&lt;/video-js&gt;
&lt;script src=&quot;//players.brightcove.net/1507807800001/default_default/index.min.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
  (function() {
    var myPlayer = videojs.getPlayer('myPlayerID');

    myPlayer.catalog.get({
      type: 'video',
      id: '6015247091001'
    })
    .then(function(video){
      sources=video.sources;

      for (let i = 0; i &lt; sources.length; i++) {
        const source = sources[i];

        // Only add the auth token as an eme header for DRM content
        if (<span class="bcls-input">your jwt token</span> &amp;&amp; source.key_systems) {
          source.emeHeaders = {
              'BCOV-Auth': <span class="bcls-input">your jwt token</span>
            };
        }
      }
        myPlayer.catalog.load(video);
      })
      .catch(function(err){
        console.log('err:', err);
      });
  })();
&lt;/script&gt;</code></pre>
    <!-- <p>
      For more details about working with MPEG-DASH, see the <a href="https://support.brightcove.com/creating-dash-drm-manifest-brightcove-player">Creating a DASH DRM Manifest for the Brightcove Player</a> document.
    </p> -->

  </section>

  <!-- <section class="bcls-section">
    <h2 id="Related_topics">Related topics</h2>

    <ul>
      <li><a href="http://docs.brightcove.com/en/staging/pas/overview-playback-authorization-service.html">Overview: DRM with Playback Authorization Service</a></li>
      <li><a href="/playback-authorization/getting-started/technical-workflow-pas.html">Implementing DRM with Playback Authorization Service</a></li>
      <li><a href="/playback-authorization/guides/using-pas-with-sdks.html">Using Playback Authorization DRM with the Native SDKs</a></li>
      <li>
        <a href="/playback-authorization/guides/additional-apis-for-pas.html">Additional APIs for Playback Authorization Service</a>
      </li>
    </ul>
  </section> -->

</article>