---
title: "Restricciones de reproducción con Brightcove Player"
description: "En este tema, aprenderá a configurar Brightcove Player para usar Restricciones de reproducción".
parent: Playback
---


<article class="bcls-article">
  <h1>{{ page.title }}</h1>
  <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="Introduction">Introducción</h2>
    <p>
      De forma predeterminada, Brightcove Player se comunica con la API de reproducción de Brightcove. Un nuevo sistema para administrar los derechos de reproducción y las restricciones se encuentra frente a la API de reproducción y proporciona autorización de reproducción mediante licencias DRM.
    </p>
    <p>Puede usar derechos de reproducción con o sin DRM, pero si elige usar restricciones de tiempo de ejecución, deberá usar un token web JSON (JWT).</p>
    <p>La protección de claves de licencia ofrece un nivel adicional de seguridad cuando se usa Dynamic Delivery con contenido protegido por DRM o HTTP Live Streaming Encryption (HLSe). Las solicitudes de licencia se pueden autenticar mediante un token web <a href="https://general.support.brightcove.com/developer/create-json-web-token.html">JSON (JWT) firmado</a>. El token se utiliza al solicitar la licencia de vídeo, una vez que el vídeo se ha cargado en el reproductor y se ha seleccionado la fuente.</p>
    <p>Para configurar Brightcove Player para la protección de claves de licencia, pasará un parámetro de token al realizar la solicitud de catálogo del video. </p>
    <p>Si no está familiarizado con esta función, consulte la <a href="https://apis.support.brightcove.com/playback-restrictions/getting-started/overview-playback-restrictions.html">descripción general: </a> Documento de restricciones de reproducción de Brightcove.</p>

    <p>Para ayudarle a comprender el código de la siguiente sección, revise los conceptos de los siguientes documentos:</p>
    <ul>
      <li><a href="https://general.support.brightcove.com/developer/create-json-web-token.html">Creación de un token web <span translate="No">JSON</span> (JWT)</a></li>
      <li><a href="https://support.brightcove.com/concepts-using-javascript-promises">Conceptos: Uso de promesas JavaScript</a></li>
      <li><a href="https://support.brightcove.com/player-catalog#Catalog_parameters_object">Parámetros de catálogo</a></li>
      <li><a href="https://support.brightcove.com/configuring-brightcove-player-drm">Configuración de Brightcove Player para DRM</a></li>
    </ul>
  </section>

  <section class="bcls-section">
    <h2 id="Requirements">Requisitos</h2>
    <p>Estos son los requisitos necesarios para utilizar las restricciones de reproducción.</p>
    <h3>Derechos de reproducción</h3>
    <p>Para utilizar los derechos de reproducción, necesita lo siguiente:</p>
    <ul>
      <li>Versión del jugador <strong>6.39.0</strong> o mayor</li>
    </ul>
    <aside class="bcls-aside bcls-aside--information">Al usar los derechos de reproducción, se ignorará cualquier restricción de contenido configurada con claves de política.</aside>

    <h3>Protección de claves de licencia</h3>
    <p>Para utilizar la protección de claves de licencia, necesita lo siguiente:</p>
    <ul>
      <li>Versión del jugador <strong>6.33.0</strong> o después</li>
      <li>Si usa DRM, necesitará el <a href="https://support.brightcove.com/configuring-brightcove-player-drm#Changelog">Complemento DRM</a> versión <strong>5.5.0</strong> o después</li>
    </ul>

  </section>

  <section class="bcls-section">
    <h2 id="Using_Playback_Rights">Uso de derechos de reproducción</h2>
    <p>
      Para utilizar los derechos de reproducción, siga estos pasos:
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>
           Elimine la clave de política de Brightcove Player. Para obtener más detalles, consulte la <a href="#Making_requests_with_Playback_Rights">Realización de solicitudes con derechos de reproducción</a> sección.
        </p>
      </li>
      <li>
        <p>
          Si usted tiene <a href="https://apis.support.brightcove.com/playback-restrictions/getting-started/overview-playback-restrictions.html#Runtime_restrictions">restricciones de tiempo de ejecución</a> , necesita un token de autorización. Cuando se especifica, este token se agrega como un encabezado de autorización para cualquier solicitud posterior.
        </p>
        <p>
          Puede agregar uno al reproductor de la siguiente manera:
        </p>
        <pre>
<code class="language-javascript" translate="No">player.catalog.setBcovAuthToken('<span class="bcls-input">your jwt token</span>');</code></pre>
      </li>
      <li>Después de cambiar la clave de política y / o el token de autorización, está listo para solicitar datos de la API de reproducción de Brightcove y cargarlos en el reproductor. Este proceso es idéntico al caso predeterminado.
        <p>
          A continuación, se muestra un ejemplo de cómo obtener un solo video con restricciones de reproducción y un token de autorización:
        </p>
        <aside class="bcls-aside bcls-aside--tip">Note que el <a href="https://player.support.brightcove.com/coding-topics/using-bc-and-getplayer-methods.html#bc_method_details">método bc ()</a> se utiliza para permitirle establecer la clave de política antes de realizar una llamada al catálogo.</aside>

    <h3>HTML</h3>
  <pre class="line-numbers">
<code class="language-html" translate="No">&lt;div style=&quot;max-width: 960px;&quot;&gt;
  &lt;video-js id=&quot;myPlayerID&quot;
    data-embed=&quot;default&quot;
    controls=&quot;&quot;
    data-application-id=&quot;&quot;
    class=&quot;vjs-fluid&quot;&gt;&lt;/video-js&gt;
&lt;/div&gt;
&lt;script src=&quot;https://players.brightcove.net/<span class="bcls-input">your account id</span>/<span class="bcls-input">your player id</span>_default/index.min.js&quot;&gt;&lt;/script&gt;
</code></pre>
    <h3>JavaScript</h3>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">&lt;script&gt;
    // +++ Add the player attributes +++
    var myPlayer,
    	myPlayerEl = document.getElementById(&quot;myPlayerID&quot;);
    myPlayerEl.setAttribute('data-account', <span class="bcls-input">your account id</span>);
    myPlayerEl.setAttribute('data-player', '<span class="bcls-input">your player id</span>');

    // +++ Create the player +++
    myPlayer = bc(myPlayerEl);

    // Unset the player policy key
    myPlayer.catalog.setPolicyKey(null);

    // Set the authorization token
    myPlayer.catalog.setBcovAuthToken('<span class="bcls-input">your jwt token</span>');
    // This should trigger a request to:
    //
    //   https://edge-auth.api.brightcove.com/playback/v1/videos/1
    //
    // With header:
    //
    //   Authorization: Bearer &lt;span class=&quot;bcls-input&quot;&gt;your jwt token&lt;/span&gt;
    //

    myPlayer.catalog.get({id: '<span class="bcls-input">your video id</span>', type: 'video'}).
    then(function(data) {
      myPlayer.catalog.load(data);
      myPlayer.muted(true);
      myPlayer.play();
    }).
    catch(function(error) {
      throw new Error(error);
    });
&lt;/script&gt;</code></pre>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Making_requests_with_Playback_Rights">Realización de solicitudes con derechos de reproducción</h2>
    <P>De forma predeterminada, todos los reproductores de Brightcove realizan una solicitud a la API de reproducción si tiene una clave de política. Para realizar solicitudes que verifiquen los derechos de reproducción primero, debe eliminar la clave de política. Aquí hay dos formas de hacerlo:</P>
    <h3>Eliminar la clave de política de todos los jugadores</h3>
    <p>Para evitar la ingesta de una clave de política para los nuevos reproductores creados en Video Cloud Studio, haga lo siguiente:</p>

    <ol class="bcls-tasklist-restart">
      <li>Comuníquese con su gerente de cuenta.</li>
      <li>Proporcione su ID de cuenta y solicite habilitar la <code translate="No">remove policy key</code> bandera.
      </li>
    </ol>

    <h3>Eliminar clave de política de jugadores individuales</h3>
    <p>Por defecto, el <code translate="No">remove policy key</code> La bandera está deshabilitada para su cuenta. Para eliminar la clave de política de jugadores individuales, haga lo siguiente:</p>
    <ol class="bcls-tasklist-restart">
      <li>En Video Cloud Studio, navegue hasta el <strong>Jugadores</strong> módulo.</li>
      <li>Seleccione el jugador del que desea eliminar la clave de política.</li>
      <li>En la navegación izquierda, selecciona Editor <strong>JSON</strong>.</li>
      <li>Selecciona el <code translate="No">policy_key</code> campo como <code translate="No">null</code>.
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="JSON editor"
            src="/assets/images/playback/policy-key-editor.png"
          />
          <figcaption class="bcls-caption--image">editor JSON</figcaption>
        </figure>
      </li>
      <li>Guarda los cambios y publica tu reproductor.</li>
    </ol>
      <!-- <pre>
        <code class="language-javascript" translate="No">player.catalog.setPolicyKey(null);</code></pre> -->
  </section>

  <section class="bcls-section">
    <h2 id="Making_requests_without_Playback_Rights">Realización de solicitudes sin derechos de reproducción</h2>
    <p>El proceso se puede revertir para dirigir las solicitudes a la API de reproducción sin derechos ni restricciones.</p>
    <p>
      Establezca la clave de política y el token de autorización de la siguiente manera:
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>Si tuvieras el <code translate="No">remove policy key</code> bandera habilitada, luego comuníquese con su administrador de cuenta para deshabilitarla.</p>
        <aside class="bcls-aside bcls-aside--information"> Si tienes el <code translate="No">remove policy key</code> marca habilitada y la deshabilita, las claves de política se volverán a generar para todos sus jugadores, excepto aquellos en los que haya establecido el <code translate="No">policy_key</code> campo a <code translate="No">null</code>.</aside>
      </li>
      <li>Si actualizó reproductores individuales en Studio, actualice el JSON con su clave de política.
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="JSON editor"
            src="/assets/images/playback/policy-key-defined.png"
          />
          <figcaption class="bcls-caption--image">editor JSON</figcaption>
        </figure>
      </li>
      <li>Establezca el token de autorización en <code translate="No">null</code>.
        <pre>
<code class="language-javascript" translate="No">player.catalog.setBcovAuthToken(null);</code></pre>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Using_License_Keys_Protection">Uso de la protección de claves de licencia</h2>
    <p>Para usar la protección de claves de licencia, pasará una cadena de token de autenticación como parte de la <a href="https://player.support.brightcove.com/references/player-catalog.html">catálogo de jugadores</a> objeto, usando el nombre de la propiedad <code translate="No">bcovAuthToken</code>.</p>
    <p>Este enfoque funciona tanto para contenido DRM como HLSE. El reproductor detectará el tipo de fuente que se está cargando desde la API de reproducción y proporcionará la implementación correcta para ese origen.</p>

    <p>Para utilizar la protección de claves de licencia, siga estos pasos:</p>
    <ol class="bcls-tasklist">
      <li>Cree un token web <a href="https://general.support.brightcove.com/developer/create-json-web-token.html">JSON (JWT) firmado</a>.</li>
      <li>Incluye este token en la solicitud de vídeo.
        <p>Este código de implementación de muestra utiliza el <a href="https://player.support.brightcove.com/references/player-catalog.html#get_method">catalog.get ()</a> método para solicitar el video mientras se proporciona el token.</p>
    <aside class="bcls-aside bcls-aside--information">Asegúrese de NO incluir el <code translate="No">data-video-id</code> parámetro en la <code translate="No">&lt;video-js&gt;</code> etiqueta.</aside>
<pre class="line-numbers">
  <code class="language-html" translate="No">&lt;video-js id=&quot;myPlayerID&quot;
    data-account=&quot;1507807800001&quot;
    data-player=&quot;default&quot;
    data-embed=&quot;default&quot;
    controls
    data-application-id&gt;&lt;/video-js&gt;
  &lt;script src=&quot;//players.brightcove.net/1507807800001/default_default/index.min.js&quot;&gt;&lt;/script&gt;
  
  &lt;script&gt;
    (function() {
      var myPlayer = videojs.getPlayer('myPlayerID');
  
      myPlayer.catalog.get({
        type: 'video',
        id: '6015247091001',
        <span class="bcls-highlight">bcovAuthToken:</span> '<span class="bcls-input">your jwt token</span>'
      })
        .then(function(videoReturned){
          myPlayer.catalog.load(videoReturned);
        })
        .catch(function(err){
          console.log('err:', err);
        });
    })();
  &lt;/script&gt;</code></pre>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Using_Concurrency_and_Registration">Uso de concurrencia y registro</h2>
    <p>Si esta usando <a href="https://apis.support.brightcove.com/playback-restrictions/guides/stream-concurrency.html">Simultaneidad de la transmisión</a> o <a href="https://apis.support.brightcove.com/playback-restrictions/guides/device-limits.html">Registro de dispositivo</a> , entonces su reproductor Brightcove necesitará utilizar el <strong>EME</strong> plug-in EN LUGAR del estándar <strong>DRM</strong> enchufar.</p>
    <aside class="bcls-aside bcls-aside--information">El complemento DRM es un contenedor para el complemento EME. Para obtener más detalles, consulte la <a href="https://player.support.brightcove.com/plugins/configuring-brightcove-player-drm.html#DRM_plugin_architecture">Configuración de Brightcove Player para DRM</a> documento.</aside> 
    

    <p>Sigue estos pasos:</p>
    <ol class="bcls-tasklist-restart">
      <li>Añade el <strong>EME</strong> complemento a su Brightcove Player. El complemento se ha actualizado para incluir <code translate="No">persistentState</code>.</li>
      <li>En Video Cloud Studio, navegue hasta el <strong>Jugadores</strong> módulo. Seleccione el enlace de un jugador para ver su información.</li>
      <li>En la barra de navegación de la izquierda, seleccione <strong>Reproducción</strong>.</li>
      <li>
        <p>Asegúrate de eso <strong>Habilitar DRM</strong> NO está seleccionado.</p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Enable DRM option"
            src="/assets/images/playback/playback-restrictions/enable-drm-option.png"
          />
          <figcaption class="bcls-caption--image">Habilitar la opción DRM</figcaption>
        </figure>
      </li>
      <li>En la navegación izquierda, selecciona Editor <strong>JSON</strong>.</li>
      <li>
        <p>En el código JSON, busque el <code translate="No">plugins</code> array y agregue el complemento EME de la siguiente manera:</p>
        <pre class="line-numbers">
<code class="language-javascript" translate="No">&quot;plugins&quot;: [
  {
  &quot;name&quot;: &quot;eme&quot;,
  &quot;scripts&quot;: [
    &quot;//players.brightcove.net/videojs-drm/5.9.1/videojs-drm.min.js&quot;
  ],
  &quot;stylesheets&quot;: [
    &quot;//players.brightcove.net/videojs-drm/5.9.1/videojs-drm.css&quot;
  ],
  &quot;options&quot;: {
    &quot;keySystems&quot;: {
      &quot;com.widevine.alpha&quot;: {
        &quot;persistentState&quot;: &quot;required&quot;
      }
    }
  }
},</code></pre>
<aside class="bcls-aside bcls-aside--warning">El complemento EME debe configurarse en el orden que se muestra arriba (scripts y hoja de estilo primero y luego la opción); de lo contrario, no funcionará.</aside> <aside class="bcls-aside bcls-aside--information">Esta funcionalidad es compatible con el complemento DRM v5.9.1 +.</aside>
      </li>
      <li>Incluya un token de autenticación JWT, como se define en el <a href="#Using_License_Keys_Protection">Uso de la protección de claves de licencia</a> sección.</li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="configuring_server_side_ads_SSAI">Configuración de anuncios del lado del servidor (SSAI)</h2>
    <p>Si está utilizando la protección de claves de licencia con SSAI, debe incluir un parámetro adicional al objeto de parámetros del catálogo, denominado <code translate="No">adConfigId</code>. </p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id=&quot;myPlayerID&quot;
  data-account=&quot;1507807800001&quot;
  data-player=&quot;default&quot;
  data-embed=&quot;default&quot;
  controls
  data-application-id&gt;&lt;/video-js&gt;
&lt;script src=&quot;//players.brightcove.net/1507807800001/default_default/index.min.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
  (function() {
    var myPlayer = videojs.getPlayer('myPlayerID');

    myPlayer.catalog.get({
      type: 'video',
      id: '6015247091001',
      bcovAuthToken: '<span class="bcls-input">your jwt token</span>',
      <span class="bcls-highlight">adConfigId:</span> '<span class="bcls-input">your ad configuration id</span>'
    })
      .then(function(videoReturned){
        myPlayer.catalog.load(videoReturned);
      })
      .catch(function(err){
        console.log('err:', err);
      });
  })();
&lt;/script&gt;</code></pre>
  </section>

  <section class="bcls-section">
    <h2 id="Using_a_custom_implementation">Uso de una implementación personalizada</h2>
    <p>Es posible que esté utilizando una implementación personalizada donde no tiene la <code translate="No">bcovAuthToken</code> para establecer el valor con el <a href="https://support.brightcove.com/player-catalog#get_method">catalog.get ()</a> solicitud de método. Si utiliza su propio reproductor o un reproductor de terceros, puede utilizar uno de los siguientes métodos para pasar su token a la solicitud de licencia:</p>
    <ul>
      <li>
        Encabezado HTTP: <code translate="No">BCOV-Auth</code>(No compatible con HLSE)
      </li>
      <li>
        Cookie: <code translate="No">bcov-auth</code>(No compatible con HLSE)
      </li>
      <li>
        Parámetro de consulta: <code translate="No">bcov-auth</code>(Solo compatible con HLSE) Debe añadirse a la url del manifiesto principal, en lugar de a la url de la licencia
      </li>
    </ul>
    <p>
      A continuación se muestra un ejemplo que muestra cómo establecer el <code translate="No">source.emeHeaders['BCOV-Auth']</code> atributo del objeto de vídeo en el token. Esto inserta el <code translate="No">emeHeader</code> en cada fuente DESPUÉS de la solicitud de catálogo.
    </p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id=&quot;myPlayerID&quot;
  data-account=&quot;1507807800001&quot;
  data-player=&quot;default&quot;
  data-embed=&quot;default&quot;
  controls
  data-application-id&gt;&lt;/video-js&gt;
&lt;script src=&quot;//players.brightcove.net/1507807800001/default_default/index.min.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
  (function() {
    var myPlayer = videojs.getPlayer('myPlayerID');

    myPlayer.catalog.get({
      type: 'video',
      id: '6015247091001'
    })
    .then(function(video){
      sources=video.sources;

      for (let i = 0; i &lt; sources.length; i++) {
        const source = sources[i];

        // Only add the auth token as an eme header for DRM content
        if (<span class="bcls-input">your jwt token</span> &amp;&amp; source.key_systems) {
          source.emeHeaders = {
              'BCOV-Auth': <span class="bcls-input">your jwt token</span>
            };
        }
      }
        myPlayer.catalog.load(video);
      })
      .catch(function(err){
        console.log('err:', err);
      });
  })();
&lt;/script&gt;</code></pre>
    <!-- <p>
      For more details about working with MPEG-DASH, see the <a href="https://support.brightcove.com/creating-dash-drm-manifest-brightcove-player">Creating a DASH DRM Manifest for the Brightcove Player</a> document.
    </p> -->

  </section>
</article>