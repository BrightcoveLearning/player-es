---
title: Retrasar la instanciación del jugador

parent: 'Publishing Videos &amp; Players'
description: In this topic, you will learn how to delay instantiation of Brightcove Player when an HTML page is browsed. Use cases where this technique is helpful are, for example, lightbox styles and single page web apps where the page with the player is not initially instantiated.
---

<article class="bcls-article">
  <h1>Retrasar la instanciación del jugador</h1>
  <summary>{{ page.description }}</summary>
  <section class="bcls-section">
    <h2 id="Delay_instantiation">Retraso de instanciación</h2>
    <p>Hay algunos casos de uso en los que querrá utilizar el código de implementación del reproductor avanzado (incrustación en la página), pero retrasar la creación de instancias del reproductor. Para hacer esto, debe modificar el <code translate="No">&lt;videos-js&gt;</code> atributos de la etiqueta y utilice el <code translate="No">bc()</code> método para inicializar el reproductor. Tenga en cuenta que el método puede tomar la ID del jugador o el elemento del jugador como argumento.</p>
    <aside class="bcls-aside bcls-aside--information">Nota: Si desea agregar dinámicamente todo el reproductor, <a href="/code-samples/brightcove-player-sample-loading-player-dynamically.html">Muestra de jugador de Brightcove: Cargando el reproductor dinámicamente</a> El documento tiene instrucciones sobre cómo hacerlo.</aside>
  </section>
  <section id="Modify_video-js_tag" class="bcls-section">
    <h2>Modificar la etiqueta video-js</h2>
    <aside class="bcls-aside bcls-aside--information player-only">Nota: Si eres cliente de Brightcove Player, no utilizarás el <code translate="No">data-video-id</code> atributo para asignar un vídeo a tu reproductor. Puede asignar el video en el <strong>Jugadores</strong> módulo, use curl o el <code translate="No">src</code> método (que se utiliza en este documento).</aside>
    <p>Al retrasar la creación de instancias del jugador, NO PUEDE usar todos los <code translate="No">&lt;video-js&gt;</code> atributos de la etiqueta, o se creará una instancia del jugador. Debe eliminar tres de los atributos del código estándar avanzado (incrustación en la página). Los atributos que deben eliminarse son:</p>
    <ul>
      <li><code translate="No">data-account</code></li>
      <li><code translate="No">data-player</code></li>
      <li><code translate="No">data-video-id</code></li>
    </ul>
    <p>Esto deja los siguientes atributos en el <code translate="No">&lt;video-js&gt;</code> etiqueta:</p>
    <ul>
      <li><code translate="No">data-embed</code></li>
      <li><code translate="No">class</code></li>
      <li><code translate="No">controls (optional)</code></li>
    </ul>
    <p>La razón por la que los atributos deben eliminarse, ya que permanece cualquiera de esos tres atributos, hará que se cree una instancia de Brightcove Player.</p>
    <p>El código avanzado utilizado debe tener un patrón en el siguiente fragmento de código. Tenga en cuenta que un <code translate="No">id</code> se agrega a la etiqueta.</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id="myPlayerID"
  data-embed="default"
  class="video-js" controls&gt;&lt;/video-js&gt;

&lt;script src="https://players.brightcove.net/1507807800001/5e28670f-28ce-4ed6-8809-227784965834_default/index.min.js"&gt;&lt;/script&gt;</code></pre>
    <p>Estos cambios en el código avanzado y el código JavaScript que se muestran a continuación funcionan juntos para retrasar la creación de instancias del reproductor.</p>
  </section>
  <section class="bcls-section">
    <h2 id="JavaScript_used">JavaScript utilizado</h2>
    <p>Una práctica muy común es utilizar un código similar al siguiente para prepararse para interactuar mediante programación con el reproductor:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">videojs.getPlayer('myPlayerID').ready(function() {
  var myPlayer = this;
});</code></pre>
    <p>Este enfoque no se puede utilizar ya que crearía una instancia del jugador. En su lugar, usará el <code translate="No">bc()</code> método para crear una instancia del reproductor DESPUÉS de que se hayan establecido otras preferencias. Esto <code translate="No">bc()</code> El método se utiliza para crear una nueva instancia de Brightcove Player y normalmente se llama automáticamente cuando se utiliza el <code translate="No">&lt;video-js&gt;</code> etiqueta, a menos que se sigan los pasos detallados aquí.</p>
    <div class="video-cloud-only">
      <ul>
        <li>Líneas 2-3: Declara una variable para el jugador y obtén el <code translate="No">video-js</code> elemento.</li>
        <li>Líneas 4-5: Utilice el <code translate="No">setAttribute()</code> método JavaScript para configurar el <code translate="No">data-account</code> y <code translate="No">data-player</code>. Esto es importante para realizar el seguimiento de los análisis y otros servicios.</li>
        <li>Línea 6: Utiliza el <code translate="No">setAttribute()</code> método JavaScript para configurar el ID de vídeo.</li>
        <li>Línea 9: Utiliza el <code translate="No">bc()</code> método para inicializar el reproductor.</li>
        <li>Líneas 12-15: Reproduce el vídeo mediante programación. Esperar a que el <code translate="No">loadedmetadata</code> evento se envíe garantiza que el catálogo haya recuperado el vídeo antes de que intente reproducirse.</li>
      </ul>
      <pre class="line-numbers">
<code class="language-html" translate="No">&lt;script type="text/javascript"&gt;
  var myPlayer,
    vTag = document.getElementById('myPlayerID');
  vTag.setAttribute('data-account', 1507807800001);
  vTag.setAttribute('data-player', 'BdGVdOd36');
  vTag.setAttribute('data-video-id', 2114345470001);

  // Use the bc() method to initialize the Brightcove Player
  myPlayer = <span class="bcls-highlight">bc(vTag)</span>;

  // Mute (in case there is an audio track, in which case play won't work) and play the video
  myPlayer.on('loadedmetadata',function(){
    myPlayer.muted(true);
    myPlayer.play();
  });
&lt;/script&gt;</code></pre>
    </div>
    <div class="player-only">
      <ul>
        <li>Líneas 2-3: Declara una variable para el jugador y obtén el <code translate="No">video-js</code> elemento.</li>
        <li>Líneas 4-5: Utilice el <code translate="No">setAttribute()</code> método JavaScript para configurar el <code translate="No">data-account</code> y <code translate="No">data-player</code>. Esto es importante para realizar el seguimiento de los análisis y otros servicios.</li>
        <li>Línea 8: Utiliza el <code translate="No">bc()</code> método para inicializar el reproductor.</li>
        <li>Línea 10: Establece el valor <code translate="No">src</code> para el reproductor. Es <strong>muy importante</strong> establecer tanto el <code translate="No">src</code> objeto de origen como <code translate="No">type</code> para el objeto de origen. Pueden producirse problemas en algunos navegadores si la primera opción del orden de la tecnología de reproducción no coincide con el tipo de vídeo.</li>
        <li>Línea 13: Reproduce el vídeo mediante programación. Por supuesto, esto no es obligatorio.</li>
      </ul>
      <pre class="line-numbers">
<code class="language-html" translate="No">&lt;script type="text/javascript"&gt;
  var myPlayer,
    vTag = document.getElementById('myPlayerID');
  vTag.setAttribute('data-account', 1507807800001);
  vTag.setAttribute('data-player', 'BdGVdOd36');

  // Use the bc() method to initialize the Brightcove Player
  myPlayer = <span class="bcls-highlight">bc(vTag)</span>;

  myPlayer.src({ src: "//solutions.brightcove.com/bcls/assets/videos/Tiger.m3u8", type: "application/x-mpegURL"});
  // Mute (in case there is an audio track, in which case play won't work) and play the video
  myPlayer.muted(true);
  myPlayer.play();
&lt;/script&gt; </code></pre>
    </div>
    <aside class="bcls-aside bcls-aside--tip">
      <p>Alternativamente, si se siente cómodo direccionando elementos directamente por ID, puede usar este código más conciso:</p>
      <pre class="line-numbers">
<code class="language-html" translate="No">&lt;script type="text/javascript"&gt;
  var myPlayer;
  myPlayerID.setAttribute('data-account', 1507807800001);
  myPlayerID.setAttribute('data-player', 'BdGVdOd36');
  myPlayerID.setAttribute('data-video-id', 2114345470001);

  // Use the bc() method to initialize the Brightcove Player
  myPlayer = bc('myPlayerID');

  // Mute (in case there is an audio track, in which case play won't work) and play the video
  myPlayer.on('loadedmetadata',function(){
    myPlayer.muted(true);
    myPlayer.play();
  });
&lt;/script&gt;</code></pre>
    </aside>
    <h4>No <code translate="No">id</code> en el jugador</h4>
    <p>Si por alguna razón no desea utilizar un <code translate="No">id</code> con su reproductor, puede utilizar el siguiente código para retrasar la creación de instancias.</p>
    <div class="video-cloud-only">
      <ul>
        <li>Líneas 3-4: Declara una variable para el jugador y obtén el <code translate="No">video-js</code> elemento.</li>
        <li>Líneas 7-8: Utilice el <code translate="No">setAttribute()</code> método JavaScript para configurar el <code translate="No">data-account</code> y <code translate="No">data-player</code>. Esto es importante para realizar el seguimiento de los análisis y otros servicios.</li>
        <li>Línea 9: Utiliza el <code translate="No">setAttribute()</code> método JavaScript para configurar el ID de vídeo.</li>
        <li>Línea 12: Utiliza el <code translate="No">bc()</code> método para inicializar el reproductor.</li>
        <li>Líneas 15-18: Reproduce el vídeo mediante programación. Esperar a que el <code translate="No">loadedmetadata</code> evento se envíe garantiza que el catálogo haya recuperado el vídeo antes de que intente reproducirse.</li>
      </ul>
      <pre class="line-numbers">
<code class="language-html" translate="No">&lt;script type="text/javascript"&gt;
  // Retrieve the element by tag name, returns an array so use the zeroth array element
  var myPlayer,
    vTag = document.getElementsByTagName('video-js')[0];

  // Assign the needed attributes
  vTag.setAttribute('data-account', 1507807800001);
  vTag.setAttribute('data-player', 'BdGVdOd36');
  vTag.setAttribute('data-video-id', 2114345470001);

  // Use the bc() method to initialize the Brightcove Player
  myPlayer = bc(vTag);

  // Mute (in case there is an audio track, in which case play won't work) and play the video
  myPlayer.on('loadedmetadata',function(){
    myPlayer.muted(true);
    myPlayer.play();
  });
&lt;/script&gt;</code></pre>
    </div>
    <div class="player-only">
      <ul>
        <li>Líneas 3-4: Declara una variable para el jugador y obtén el <code translate="No">video-js</code> elemento.</li>
        <li>Líneas 7-8: Utilice el <code translate="No">setAttribute()</code> método JavaScript para configurar el <code translate="No">data-account</code> y <code translate="No">data-player</code>. Esto es importante para realizar el seguimiento de los análisis y otros servicios.</li>
        <li>Línea 11: Utiliza el <code translate="No">bc()</code> método para inicializar el reproductor.</li>
        <li>Línea 13: Establece el valor <code translate="No">src</code> para el reproductor. Es <strong>muy importante</strong> establecer tanto el <code translate="No">src</code> objeto de origen como <code translate="No">type</code> para el objeto de origen. Pueden producirse problemas en algunos navegadores si la primera opción del orden de la tecnología de reproducción no coincide con el tipo de vídeo.</li>
        <li>Línea 16: Reproduce el vídeo mediante programación. Por supuesto, esto no es obligatorio.</li>
      </ul>
      <pre class="line-numbers">
<code class="language-javascript" translate="No">&lt;script type="text/javascript"&gt;
  // Retrieve the element by tag name, returns an array so use the zeroth array element
  var myPlayer,
    vTag = document.getElementsByTagName('video-js')[0];

  // Assign the needed attributes
  vTag.setAttribute('data-account', 1507807800001);
  vTag.setAttribute('data-player', 'BdGVdOd36');

  // Use the bc() method to initialize the Brightcove Player
  myPlayer = bc('vTag');

  myPlayer.src({ src: "//solutions.brightcove.com/bcls/assets/videos/Tiger.m3u8", type: "application/x-mpegURL"});
  // Mute (in case there is an audio track, in which case play won't work) and play the video
  myPlayer.muted(true);
  myPlayer.play();
&lt;/script&gt; </code></pre>
    </div>
  </section>
  <section class="bcls-section">
    <h2 id="CSAI_with_SSAI_ad_failover">CSAI con conmutación por error de anuncios SSAI</h2>
    <p>Con la conmutación por error de anuncios activada, Brightcove Player detecta si hay un bloqueador de anuncios en el navegador. De lo contrario, se reproducen sus anuncios del lado del cliente (CSAI). Si se detecta un bloqueador de anuncios, el reproductor solicita automáticamente sus anuncios del lado del servidor (SSAI). Para obtener más detalles, consulte la <a href="https://ssai.support.brightcove.com/vod/guides/ssai-ad-block-detection-and-auto-failover.html">SSAI: Detección de bloque de anuncios y conmutación por error automática</a> documento.</p>
    <p>De forma predeterminada, llamando al <code translate="No">bc()</code> El método obliga al reproductor a inicializarse inmediatamente. Si desea utilizar la conmutación por error de anuncios con el <code translate="No">bc()</code> , debe esperar a que el reproductor compruebe si hay un bloqueador de anuncios. Puede hacer esto con el siguiente código:</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">bc.usingAdBlocker().then(function() {
  // The promise callback receives a true/false result, which is stored
  // internally, so future bc() calls will use it. There is no need to
  // handle it yourself.
  //
  // You can pass custom arguments to bc, as normal, if needed.
  bc();
});</code></pre>
    <h3>Ejemplo</h3>
    <p>Aquí hay un código de ejemplo.</p>
    <h4>HTML</h4>
    <p>Este es el HTML del ejemplo.</p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id="myPlayerID"
	data-embed="default"
	data-application-id
	class="video-js"
	controls
	width="640"
	height="360"&gt;&lt;/video-js&gt;
&lt;script src="//players.brightcove.net/1752604059001/W6RmT8TVL_default/index.min.js"&gt;&lt;/script&gt;</code></pre>
    <h4>JavaScript</h4>
    <p>Este es el JavaScript del ejemplo.</p>
    <pre class="line-numbers">
<code class="language-javascript" translate="No">&lt;script type="text/javascript"&gt;
  // +++ Define the player options +++
  var options = {
    controlBar: {
      volumePanel: {
        inline: false,
        vertical: true
      }
    }
  };

  // +++ Add the player attributes +++
  var myPlayer,
		myPlayerEl = document.getElementById("myPlayerID");
  myPlayerEl.setAttribute('data-account', 1752604059001);
  myPlayerEl.setAttribute('data-player', 'W6RmT8TVL');
  myPlayerEl.setAttribute('data-video-id', 5802784116001);

  // +++ Create the player +++
  bc.usingAdBlocker().then(function() {
    myPlayer = bc(myPlayerEl, options);

    // +++ Optionally, mute and start playback +++
    myPlayer.on('loadedmetadata',function(){
      myPlayer.muted(true);
      myPlayer.play();
    });
  });
&lt;/script&gt;</code></pre>
  </section>
</article>